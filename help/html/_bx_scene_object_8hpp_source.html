<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BxEngine: BxSceneObject.hpp Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">BxEngine
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">BxSceneObject.hpp</div>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#pragma once</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#include &quot;BxXml.hpp&quot;</span>
<a name="l00003"></a>00003 <span class="preprocessor">#include &quot;BxVarMap.hpp&quot;</span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &quot;BxDraw.hpp&quot;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &quot;BxWebContent.hpp&quot;</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &quot;BxImage.hpp&quot;</span>
<a name="l00007"></a>00007 
<a name="l00009"></a><a class="code" href="class_bx_scene_object.html">00009</a> <span class="keyword">class </span><a class="code" href="class_bx_scene_object.html" title="씬객체 운영">BxSceneObject</a>
<a name="l00010"></a>00010 {
<a name="l00011"></a>00011     <span class="keyword">enum</span>
<a name="l00012"></a>00012     {
<a name="l00013"></a>00013         TAG_SCENEOBJECT = 0,
<a name="l00014"></a>00014         TAG_LAYOUT,
<a name="l00015"></a>00015         TAG_LAYOUT_SPLIT,
<a name="l00016"></a>00016         TAG_LAYOUT_OUTLINE,
<a name="l00017"></a>00017         TAG_LAYOUT_EXTRA,
<a name="l00018"></a>00018         TAG_LAYOUT_VIEW,
<a name="l00019"></a>00019         TAG_CONTENT,
<a name="l00020"></a>00020         TAG_CONTENT_COLOR,
<a name="l00021"></a>00021         TAG_CONTENT_EDGE,
<a name="l00022"></a>00022         TAG_CONTENT_IMAGE,
<a name="l00023"></a>00023         TAG_CONTENT_SPRITE,
<a name="l00024"></a>00024         TAG_CONTENT_FONT,
<a name="l00025"></a>00025         TAG_CONTENT_TEXT,
<a name="l00026"></a>00026         TAG_CONTENT_BUTTON,
<a name="l00027"></a>00027         TAG_CONTENT_EDITBOX
<a name="l00028"></a>00028     };
<a name="l00029"></a>00029     <span class="keyword">enum</span>
<a name="l00030"></a>00030     {
<a name="l00031"></a>00031         ATTB_SCENEOBJECT_VERSION = 0,
<a name="l00032"></a>00032         ATTB_LAYOUT_NAME = 0,
<a name="l00033"></a>00033         ATTB_LAYOUT_SPLIT_NAME = 0,
<a name="l00034"></a>00034         ATTB_LAYOUT_SPLIT_POS,
<a name="l00035"></a>00035         ATTB_LAYOUT_SPLIT_SIZE,
<a name="l00036"></a>00036         ATTB_LAYOUT_SPLIT_FILL,
<a name="l00037"></a>00037         ATTB_LAYOUT_OUTLINE_NAME = 0,
<a name="l00038"></a>00038         ATTB_LAYOUT_OUTLINE_SIZE,
<a name="l00039"></a>00039         ATTB_LAYOUT_OUTLINE_FILL,
<a name="l00040"></a>00040         ATTB_LAYOUT_EXTRA_NAME = 0,
<a name="l00041"></a>00041         ATTB_LAYOUT_EXTRA_WIDTH,
<a name="l00042"></a>00042         ATTB_LAYOUT_EXTRA_HEIGHT,
<a name="l00043"></a>00043         ATTB_LAYOUT_EXTRA_FILL,
<a name="l00044"></a>00044         ATTB_LAYOUT_VIEW_NAME = 0,
<a name="l00045"></a>00045         ATTB_LAYOUT_VIEW_POSX,
<a name="l00046"></a>00046         ATTB_LAYOUT_VIEW_POSY,
<a name="l00047"></a>00047         ATTB_LAYOUT_VIEW_WIDTH,
<a name="l00048"></a>00048         ATTB_LAYOUT_VIEW_HEIGHT,
<a name="l00049"></a>00049         ATTB_LAYOUT_VIEW_SCROLL,
<a name="l00050"></a>00050         ATTB_LAYOUT_VIEW_FILL,
<a name="l00051"></a>00051         ATTB_CONTENT_NAME = 0,
<a name="l00052"></a>00052         ATTB_CONTENT_COLOR_NAME = 0,
<a name="l00053"></a>00053         ATTB_CONTENT_COLOR_ARGB,
<a name="l00054"></a>00054         ATTB_CONTENT_EDGE_NAME = 0,
<a name="l00055"></a>00055         ATTB_CONTENT_EDGE_COLORS,
<a name="l00056"></a>00056         ATTB_CONTENT_IMAGE_NAME = 0,
<a name="l00057"></a>00057         ATTB_CONTENT_IMAGE_URL,
<a name="l00058"></a>00058         ATTB_CONTENT_SPRITE_NAME = 0,
<a name="l00059"></a>00059         ATTB_CONTENT_SPRITE_IMAGES,
<a name="l00060"></a>00060         ATTB_CONTENT_SPRITE_DELAY,
<a name="l00061"></a>00061         ATTB_CONTENT_FONT_NAME = 0,
<a name="l00062"></a>00062         ATTB_CONTENT_FONT_SIZE,
<a name="l00063"></a>00063         ATTB_CONTENT_FONT_URL,
<a name="l00064"></a>00064         ATTB_CONTENT_TEXT_NAME = 0,
<a name="l00065"></a>00065         ATTB_CONTENT_TEXT_FORMAT,
<a name="l00066"></a>00066         ATTB_CONTENT_TEXT_FONT,
<a name="l00067"></a>00067         ATTB_CONTENT_TEXT_COLOR,
<a name="l00068"></a>00068         ATTB_CONTENT_TEXT_VECTOR,
<a name="l00069"></a>00069         ATTB_CONTENT_TEXT_LINE,
<a name="l00070"></a>00070         ATTB_CONTENT_BUTTON_NAME = 0,
<a name="l00071"></a>00071         ATTB_CONTENT_BUTTON_IMAGES,
<a name="l00072"></a>00072         ATTB_CONTENT_BUTTON_EDGES,
<a name="l00073"></a>00073         ATTB_CONTENT_BUTTON_EVENT,
<a name="l00074"></a>00074         ATTB_CONTENT_BUTTON_LINK,
<a name="l00075"></a>00075         ATTB_CONTENT_EDITBOX_NAME = 0,
<a name="l00076"></a>00076         ATTB_CONTENT_EDITBOX_TEXT,
<a name="l00077"></a>00077         ATTB_CONTENT_EDITBOX_COLORS
<a name="l00078"></a>00078     };
<a name="l00079"></a>00079 
<a name="l00080"></a>00080 <span class="keyword">public</span>:
<a name="l00081"></a>00081     global_func <a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a>&amp; Domain() {global_data <a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a> _Domain; <span class="keywordflow">return</span> _Domain;}
<a name="l00082"></a>00082     global_func <a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a>&amp; Subject() {global_data <a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a> _Subject; <span class="keywordflow">return</span> _Subject;}
<a name="l00083"></a>00083     global_func <span class="keywordtype">int</span>&amp; Version() {global_data <span class="keywordtype">int</span> _Version; <span class="keywordflow">return</span> _Version;}
<a name="l00084"></a>00084     global_func callback_event&amp; Callback() {global_data callback_event _Callback; <span class="keywordflow">return</span> _Callback;}
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 <span class="keyword">public</span>:
<a name="l00087"></a>00087     <a class="code" href="class_bx_scene_object.html" title="씬객체 운영">BxSceneObject</a>() {Init(-1);}
<a name="l00088"></a>00088     <span class="keyword">virtual</span> ~<a class="code" href="class_bx_scene_object.html" title="씬객체 운영">BxSceneObject</a>() {Quit(-1);}
<a name="l00089"></a>00089     <span class="keywordtype">void</span> Init(<span class="keywordtype">int</span> index)
<a name="l00090"></a>00090     {
<a name="l00091"></a>00091         <a class="code" href="class_bx_scene_object.html#a94c0076a3381b646504fe5833585d597">CurSection</a> = NoSection;
<a name="l00092"></a>00092     }
<a name="l00093"></a>00093     <span class="keywordtype">void</span> Quit(<span class="keywordtype">int</span> index)
<a name="l00094"></a>00094     {
<a name="l00095"></a>00095     }
<a name="l00096"></a>00096 
<a name="l00097"></a>00097 <span class="keyword">public</span>:
<a name="l00098"></a>00098     global_func <span class="keywordtype">void</span> GetParser(<a class="code" href="class_bx_xml.html" title="XML 관리">BxXml</a>&amp; XMLParser)
<a name="l00099"></a>00099     {
<a name="l00100"></a>00100         XMLParser.DefineTag(TAG_SCENEOBJECT, <span class="stringliteral">&quot;SCENEOBJECT&quot;</span>);
<a name="l00101"></a>00101         XMLParser.DefineTag(TAG_LAYOUT, <span class="stringliteral">&quot;LAYOUT&quot;</span>);
<a name="l00102"></a>00102         XMLParser.DefineTag(TAG_LAYOUT_SPLIT, <span class="stringliteral">&quot;SPLIT&quot;</span>);
<a name="l00103"></a>00103         XMLParser.DefineTag(TAG_LAYOUT_OUTLINE, <span class="stringliteral">&quot;OUTLINE&quot;</span>);
<a name="l00104"></a>00104         XMLParser.DefineTag(TAG_LAYOUT_EXTRA, <span class="stringliteral">&quot;EXTRA&quot;</span>);
<a name="l00105"></a>00105         XMLParser.DefineTag(TAG_LAYOUT_VIEW, <span class="stringliteral">&quot;VIEW&quot;</span>);
<a name="l00106"></a>00106         XMLParser.DefineTag(TAG_CONTENT, <span class="stringliteral">&quot;CONTENT&quot;</span>);
<a name="l00107"></a>00107         XMLParser.DefineTag(TAG_CONTENT_COLOR, <span class="stringliteral">&quot;COLOR&quot;</span>);
<a name="l00108"></a>00108         XMLParser.DefineTag(TAG_CONTENT_EDGE, <span class="stringliteral">&quot;EDGE&quot;</span>);
<a name="l00109"></a>00109         XMLParser.DefineTag(TAG_CONTENT_IMAGE, <span class="stringliteral">&quot;IMAGE&quot;</span>);
<a name="l00110"></a>00110         XMLParser.DefineTag(TAG_CONTENT_SPRITE, <span class="stringliteral">&quot;SPRITE&quot;</span>);
<a name="l00111"></a>00111         XMLParser.DefineTag(TAG_CONTENT_FONT, <span class="stringliteral">&quot;FONT&quot;</span>);
<a name="l00112"></a>00112         XMLParser.DefineTag(TAG_CONTENT_TEXT, <span class="stringliteral">&quot;TEXT&quot;</span>);
<a name="l00113"></a>00113         XMLParser.DefineTag(TAG_CONTENT_BUTTON, <span class="stringliteral">&quot;BUTTON&quot;</span>);
<a name="l00114"></a>00114         XMLParser.DefineTag(TAG_CONTENT_EDITBOX, <span class="stringliteral">&quot;EDITBOX&quot;</span>);
<a name="l00115"></a>00115         XMLParser.DefineAttb(TAG_SCENEOBJECT, ATTB_SCENEOBJECT_VERSION, <span class="stringliteral">&quot;VERSION&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00116"></a>00116         XMLParser.DefineAttb(TAG_LAYOUT, ATTB_LAYOUT_NAME, <span class="stringliteral">&quot;NAME&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00117"></a>00117         XMLParser.DefineAttb(TAG_LAYOUT_SPLIT, ATTB_LAYOUT_SPLIT_NAME, <span class="stringliteral">&quot;NAME&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00118"></a>00118         XMLParser.DefineAttb(TAG_LAYOUT_SPLIT, ATTB_LAYOUT_SPLIT_POS, <span class="stringliteral">&quot;POS&quot;</span>, <span class="stringliteral">&quot;left&quot;</span>);
<a name="l00119"></a>00119         XMLParser.DefineAttb(TAG_LAYOUT_SPLIT, ATTB_LAYOUT_SPLIT_SIZE, <span class="stringliteral">&quot;SIZE&quot;</span>, <span class="stringliteral">&quot;100%&quot;</span>);
<a name="l00120"></a>00120         XMLParser.DefineAttb(TAG_LAYOUT_SPLIT, ATTB_LAYOUT_SPLIT_FILL, <span class="stringliteral">&quot;FILL&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00121"></a>00121         XMLParser.DefineAttb(TAG_LAYOUT_OUTLINE, ATTB_LAYOUT_OUTLINE_NAME, <span class="stringliteral">&quot;NAME&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00122"></a>00122         XMLParser.DefineAttb(TAG_LAYOUT_OUTLINE, ATTB_LAYOUT_OUTLINE_SIZE, <span class="stringliteral">&quot;SIZE&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>);
<a name="l00123"></a>00123         XMLParser.DefineAttb(TAG_LAYOUT_OUTLINE, ATTB_LAYOUT_OUTLINE_FILL, <span class="stringliteral">&quot;FILL&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00124"></a>00124         XMLParser.DefineAttb(TAG_LAYOUT_EXTRA, ATTB_LAYOUT_EXTRA_NAME, <span class="stringliteral">&quot;NAME&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00125"></a>00125         XMLParser.DefineAttb(TAG_LAYOUT_EXTRA, ATTB_LAYOUT_EXTRA_WIDTH, <span class="stringliteral">&quot;WIDTH&quot;</span>, <span class="stringliteral">&quot;100%&quot;</span>);
<a name="l00126"></a>00126         XMLParser.DefineAttb(TAG_LAYOUT_EXTRA, ATTB_LAYOUT_EXTRA_HEIGHT, <span class="stringliteral">&quot;HEIGHT&quot;</span>, <span class="stringliteral">&quot;100%&quot;</span>);
<a name="l00127"></a>00127         XMLParser.DefineAttb(TAG_LAYOUT_EXTRA, ATTB_LAYOUT_EXTRA_FILL, <span class="stringliteral">&quot;FILL&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00128"></a>00128         XMLParser.DefineAttb(TAG_LAYOUT_VIEW, ATTB_LAYOUT_VIEW_NAME, <span class="stringliteral">&quot;NAME&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00129"></a>00129         XMLParser.DefineAttb(TAG_LAYOUT_VIEW, ATTB_LAYOUT_VIEW_POSX, <span class="stringliteral">&quot;POSX&quot;</span>, <span class="stringliteral">&quot;left&quot;</span>);
<a name="l00130"></a>00130         XMLParser.DefineAttb(TAG_LAYOUT_VIEW, ATTB_LAYOUT_VIEW_POSY, <span class="stringliteral">&quot;POSY&quot;</span>, <span class="stringliteral">&quot;top&quot;</span>);
<a name="l00131"></a>00131         XMLParser.DefineAttb(TAG_LAYOUT_VIEW, ATTB_LAYOUT_VIEW_WIDTH, <span class="stringliteral">&quot;WIDTH&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00132"></a>00132         XMLParser.DefineAttb(TAG_LAYOUT_VIEW, ATTB_LAYOUT_VIEW_HEIGHT, <span class="stringliteral">&quot;HEIGHT&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00133"></a>00133         XMLParser.DefineAttb(TAG_LAYOUT_VIEW, ATTB_LAYOUT_VIEW_SCROLL, <span class="stringliteral">&quot;SCROLL&quot;</span>, <span class="stringliteral">&quot;hide&quot;</span>);
<a name="l00134"></a>00134         XMLParser.DefineAttb(TAG_LAYOUT_VIEW, ATTB_LAYOUT_VIEW_FILL, <span class="stringliteral">&quot;FILL&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00135"></a>00135         XMLParser.DefineAttb(TAG_CONTENT, ATTB_CONTENT_NAME, <span class="stringliteral">&quot;NAME&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00136"></a>00136         XMLParser.DefineAttb(TAG_CONTENT_COLOR, ATTB_CONTENT_COLOR_NAME, <span class="stringliteral">&quot;NAME&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00137"></a>00137         XMLParser.DefineAttb(TAG_CONTENT_COLOR, ATTB_CONTENT_COLOR_ARGB, <span class="stringliteral">&quot;ARGB&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00138"></a>00138         XMLParser.DefineAttb(TAG_CONTENT_EDGE, ATTB_CONTENT_EDGE_NAME, <span class="stringliteral">&quot;NAME&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00139"></a>00139         XMLParser.DefineAttb(TAG_CONTENT_EDGE, ATTB_CONTENT_EDGE_COLORS, <span class="stringliteral">&quot;COLORS&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00140"></a>00140         XMLParser.DefineAttb(TAG_CONTENT_IMAGE, ATTB_CONTENT_IMAGE_NAME, <span class="stringliteral">&quot;NAME&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00141"></a>00141         XMLParser.DefineAttb(TAG_CONTENT_IMAGE, ATTB_CONTENT_IMAGE_URL, <span class="stringliteral">&quot;URL&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00142"></a>00142         XMLParser.DefineAttb(TAG_CONTENT_SPRITE, ATTB_CONTENT_SPRITE_NAME, <span class="stringliteral">&quot;NAME&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00143"></a>00143         XMLParser.DefineAttb(TAG_CONTENT_SPRITE, ATTB_CONTENT_SPRITE_IMAGES, <span class="stringliteral">&quot;IMAGES&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00144"></a>00144         XMLParser.DefineAttb(TAG_CONTENT_SPRITE, ATTB_CONTENT_SPRITE_DELAY, <span class="stringliteral">&quot;DELAY&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>);
<a name="l00145"></a>00145         XMLParser.DefineAttb(TAG_CONTENT_FONT, ATTB_CONTENT_FONT_NAME, <span class="stringliteral">&quot;NAME&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00146"></a>00146         XMLParser.DefineAttb(TAG_CONTENT_FONT, ATTB_CONTENT_FONT_SIZE, <span class="stringliteral">&quot;SIZE&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00147"></a>00147         XMLParser.DefineAttb(TAG_CONTENT_FONT, ATTB_CONTENT_FONT_URL, <span class="stringliteral">&quot;URL&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00148"></a>00148         XMLParser.DefineAttb(TAG_CONTENT_TEXT, ATTB_CONTENT_TEXT_NAME, <span class="stringliteral">&quot;NAME&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00149"></a>00149         XMLParser.DefineAttb(TAG_CONTENT_TEXT, ATTB_CONTENT_TEXT_FORMAT, <span class="stringliteral">&quot;FORMAT&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00150"></a>00150         XMLParser.DefineAttb(TAG_CONTENT_TEXT, ATTB_CONTENT_TEXT_FONT, <span class="stringliteral">&quot;FONT&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00151"></a>00151         XMLParser.DefineAttb(TAG_CONTENT_TEXT, ATTB_CONTENT_TEXT_COLOR, <span class="stringliteral">&quot;COLOR&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00152"></a>00152         XMLParser.DefineAttb(TAG_CONTENT_TEXT, ATTB_CONTENT_TEXT_VECTOR, <span class="stringliteral">&quot;VECTOR&quot;</span>, <span class="stringliteral">&quot;numpad1&quot;</span>);
<a name="l00153"></a>00153         XMLParser.DefineAttb(TAG_CONTENT_TEXT, ATTB_CONTENT_TEXT_LINE, <span class="stringliteral">&quot;LINE&quot;</span>, <span class="stringliteral">&quot;single&quot;</span>);
<a name="l00154"></a>00154         XMLParser.DefineAttb(TAG_CONTENT_BUTTON, ATTB_CONTENT_BUTTON_NAME, <span class="stringliteral">&quot;NAME&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00155"></a>00155         XMLParser.DefineAttb(TAG_CONTENT_BUTTON, ATTB_CONTENT_BUTTON_IMAGES, <span class="stringliteral">&quot;IMAGES&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00156"></a>00156         XMLParser.DefineAttb(TAG_CONTENT_BUTTON, ATTB_CONTENT_BUTTON_EDGES, <span class="stringliteral">&quot;EDGES&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00157"></a>00157         XMLParser.DefineAttb(TAG_CONTENT_BUTTON, ATTB_CONTENT_BUTTON_EVENT, <span class="stringliteral">&quot;EVENT&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00158"></a>00158         XMLParser.DefineAttb(TAG_CONTENT_BUTTON, ATTB_CONTENT_BUTTON_LINK, <span class="stringliteral">&quot;LINK&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00159"></a>00159         XMLParser.DefineAttb(TAG_CONTENT_EDITBOX, ATTB_CONTENT_EDITBOX_NAME, <span class="stringliteral">&quot;NAME&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00160"></a>00160         XMLParser.DefineAttb(TAG_CONTENT_EDITBOX, ATTB_CONTENT_EDITBOX_TEXT, <span class="stringliteral">&quot;TEXT&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00161"></a>00161         XMLParser.DefineAttb(TAG_CONTENT_EDITBOX, ATTB_CONTENT_EDITBOX_COLORS, <span class="stringliteral">&quot;COLORS&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00162"></a>00162     }
<a name="l00163"></a>00163 
<a name="l00164"></a>00164     <span class="keywordtype">void</span> LoadXML(<span class="keywordtype">string</span> FileName)
<a name="l00165"></a>00165     {
<a name="l00166"></a>00166         <a class="code" href="class_bx_scene_object.html#a94c0076a3381b646504fe5833585d597">CurSection</a> = NoSection;
<a name="l00167"></a>00167         Layout.Reset();
<a name="l00168"></a>00168         Content.Reset();
<a name="l00169"></a>00169         Map.Reset();
<a name="l00170"></a>00170         <span class="comment">// 예약어 등록</span>
<a name="l00171"></a>00171         Content[0].AddNull(Map, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00172"></a>00172         Content[0].AddValue(Map, <span class="stringliteral">&quot;pos.left&quot;</span>, CodeLeft);
<a name="l00173"></a>00173         Content[0].AddValue(Map, <span class="stringliteral">&quot;pos.top&quot;</span>, CodeTop);
<a name="l00174"></a>00174         Content[0].AddValue(Map, <span class="stringliteral">&quot;pos.right&quot;</span>, CodeRight);
<a name="l00175"></a>00175         Content[0].AddValue(Map, <span class="stringliteral">&quot;pos.bottom&quot;</span>, CodeBottom);
<a name="l00176"></a>00176         Content[0].AddValue(Map, <span class="stringliteral">&quot;posx.left&quot;</span>, CodeLeft);
<a name="l00177"></a>00177         Content[0].AddValue(Map, <span class="stringliteral">&quot;posy.top&quot;</span>, CodeTop);
<a name="l00178"></a>00178         Content[0].AddValue(Map, <span class="stringliteral">&quot;posx.right&quot;</span>, CodeRight);
<a name="l00179"></a>00179         Content[0].AddValue(Map, <span class="stringliteral">&quot;posy.bottom&quot;</span>, CodeBottom);
<a name="l00180"></a>00180         Content[0].AddValue(Map, <span class="stringliteral">&quot;scroll.hide&quot;</span>, CodeHide);
<a name="l00181"></a>00181         Content[0].AddValue(Map, <span class="stringliteral">&quot;scroll.show&quot;</span>, CodeShow);
<a name="l00182"></a>00182         Content[0].AddValue(Map, <span class="stringliteral">&quot;vector.numpad1&quot;</span>, CodeNumpad1);
<a name="l00183"></a>00183         Content[0].AddValue(Map, <span class="stringliteral">&quot;vector.numpad2&quot;</span>, CodeNumpad2);
<a name="l00184"></a>00184         Content[0].AddValue(Map, <span class="stringliteral">&quot;vector.numpad3&quot;</span>, CodeNumpad3);
<a name="l00185"></a>00185         Content[0].AddValue(Map, <span class="stringliteral">&quot;vector.numpad4&quot;</span>, CodeNumpad4);
<a name="l00186"></a>00186         Content[0].AddValue(Map, <span class="stringliteral">&quot;vector.numpad5&quot;</span>, CodeNumpad5);
<a name="l00187"></a>00187         Content[0].AddValue(Map, <span class="stringliteral">&quot;vector.numpad6&quot;</span>, CodeNumpad6);
<a name="l00188"></a>00188         Content[0].AddValue(Map, <span class="stringliteral">&quot;vector.numpad7&quot;</span>, CodeNumpad7);
<a name="l00189"></a>00189         Content[0].AddValue(Map, <span class="stringliteral">&quot;vector.numpad8&quot;</span>, CodeNumpad8);
<a name="l00190"></a>00190         Content[0].AddValue(Map, <span class="stringliteral">&quot;vector.numpad9&quot;</span>, CodeNumpad9);
<a name="l00191"></a>00191         Content[0].AddValue(Map, <span class="stringliteral">&quot;line.single&quot;</span>, CodeSingle);
<a name="l00192"></a>00192         Content[0].AddValue(Map, <span class="stringliteral">&quot;line.multi&quot;</span>, CodeMulti);
<a name="l00193"></a>00193         <span class="comment">// XML파싱</span>
<a name="l00194"></a>00194         <a class="code" href="class_bx_xml.html" title="XML 관리">BxXml</a> XMLParser;
<a name="l00195"></a>00195         GetParser(XMLParser);
<a name="l00196"></a>00196         <span class="keywordflow">if</span>(XMLParser.ReadBegin(FileName))
<a name="l00197"></a>00197         {
<a name="l00198"></a>00198             BxXml::State State = BxXml::BLANK;
<a name="l00199"></a>00199             <span class="keywordflow">while</span>(State != BxXml::ENDOFFILE &amp;&amp; State != BxXml::ERROR)
<a name="l00200"></a>00200             {
<a name="l00201"></a>00201                 <span class="keyword">const</span> <span class="keywordtype">int</span> TAG = XMLParser.NextTag(&amp;State);
<a name="l00202"></a>00202                 <span class="comment">// 대상구간</span>
<a name="l00203"></a>00203                 <span class="keywordflow">if</span>(State == BxXml::OPEN)
<a name="l00204"></a>00204                 {
<a name="l00205"></a>00205                     <span class="keywordflow">switch</span>(TAG)
<a name="l00206"></a>00206                     {
<a name="l00207"></a>00207                     <span class="keywordflow">case</span> TAG_SCENEOBJECT:
<a name="l00208"></a>00208                         <span class="keywordflow">if</span>(<a class="code" href="class_bx_scene_object.html#a94c0076a3381b646504fe5833585d597">CurSection</a> == NoSection)
<a name="l00209"></a>00209                             <a class="code" href="class_bx_scene_object.html#a94c0076a3381b646504fe5833585d597">CurSection</a> = InSceneObject;
<a name="l00210"></a>00210                         <span class="keywordflow">continue</span>;
<a name="l00211"></a>00211                     <span class="keywordflow">case</span> TAG_LAYOUT:
<a name="l00212"></a>00212                         <span class="keywordflow">if</span>(<a class="code" href="class_bx_scene_object.html#a94c0076a3381b646504fe5833585d597">CurSection</a> == InSceneObject)
<a name="l00213"></a>00213                         {
<a name="l00214"></a>00214                             <a class="code" href="class_bx_scene_object.html#a94c0076a3381b646504fe5833585d597">CurSection</a> = InLayout;
<a name="l00215"></a>00215                             Layout.Insert(LAST);
<a name="l00216"></a>00216                         }
<a name="l00217"></a>00217                         <span class="keywordflow">continue</span>;
<a name="l00218"></a>00218                     <span class="keywordflow">case</span> TAG_CONTENT:
<a name="l00219"></a>00219                         <span class="keywordflow">if</span>(<a class="code" href="class_bx_scene_object.html#a94c0076a3381b646504fe5833585d597">CurSection</a> == InSceneObject)
<a name="l00220"></a>00220                         {
<a name="l00221"></a>00221                             <a class="code" href="class_bx_scene_object.html#a94c0076a3381b646504fe5833585d597">CurSection</a> = InContent;
<a name="l00222"></a>00222                             Content.Insert(LAST);
<a name="l00223"></a>00223                         }
<a name="l00224"></a>00224                         <span class="keywordflow">continue</span>;
<a name="l00225"></a>00225                     }
<a name="l00226"></a>00226                 }
<a name="l00227"></a>00227                 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(State == BxXml::CLOSE)
<a name="l00228"></a>00228                 {
<a name="l00229"></a>00229                     <span class="keywordflow">switch</span>(TAG)
<a name="l00230"></a>00230                     {
<a name="l00231"></a>00231                     <span class="keywordflow">case</span> TAG_SCENEOBJECT:
<a name="l00232"></a>00232                         <span class="keywordflow">if</span>(<a class="code" href="class_bx_scene_object.html#a94c0076a3381b646504fe5833585d597">CurSection</a> == InSceneObject)
<a name="l00233"></a>00233                             <a class="code" href="class_bx_scene_object.html#a94c0076a3381b646504fe5833585d597">CurSection</a> = NoSection;
<a name="l00234"></a>00234                         <span class="keywordflow">continue</span>;
<a name="l00235"></a>00235                     <span class="keywordflow">case</span> TAG_LAYOUT:
<a name="l00236"></a>00236                         <span class="keywordflow">if</span>(<a class="code" href="class_bx_scene_object.html#a94c0076a3381b646504fe5833585d597">CurSection</a> == InLayout)
<a name="l00237"></a>00237                             <a class="code" href="class_bx_scene_object.html#a94c0076a3381b646504fe5833585d597">CurSection</a> = InSceneObject;
<a name="l00238"></a>00238                         <span class="keywordflow">continue</span>;
<a name="l00239"></a>00239                     <span class="keywordflow">case</span> TAG_CONTENT:
<a name="l00240"></a>00240                         <span class="keywordflow">if</span>(<a class="code" href="class_bx_scene_object.html#a94c0076a3381b646504fe5833585d597">CurSection</a> == InContent)
<a name="l00241"></a>00241                             <a class="code" href="class_bx_scene_object.html#a94c0076a3381b646504fe5833585d597">CurSection</a> = InSceneObject;
<a name="l00242"></a>00242                         <span class="keywordflow">continue</span>;
<a name="l00243"></a>00243                     }
<a name="l00244"></a>00244                 }
<a name="l00245"></a>00245                 <span class="comment">// 레이아웃</span>
<a name="l00246"></a>00246                 <span class="keywordflow">if</span>(<a class="code" href="class_bx_scene_object.html#a94c0076a3381b646504fe5833585d597">CurSection</a> == InLayout)
<a name="l00247"></a>00247                 {
<a name="l00248"></a>00248                     <span class="keywordflow">if</span>(State == BxXml::OPEN || State == BxXml::OPENCLOSE)
<a name="l00249"></a>00249                     {
<a name="l00250"></a>00250                         <span class="keywordflow">switch</span>(TAG)
<a name="l00251"></a>00251                         {
<a name="l00252"></a>00252                         <span class="keywordflow">case</span> TAG_LAYOUT_SPLIT:
<a name="l00253"></a>00253                             {
<a name="l00254"></a>00254                                 <a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a> Name, Pos, Size, Fill;
<a name="l00255"></a>00255                                 XMLParser.ReadAttb(ATTB_LAYOUT_SPLIT_NAME, Name);
<a name="l00256"></a>00256                                 XMLParser.ReadAttb(ATTB_LAYOUT_SPLIT_POS, Pos);
<a name="l00257"></a>00257                                 XMLParser.ReadAttb(ATTB_LAYOUT_SPLIT_SIZE, Size);
<a name="l00258"></a>00258                                 XMLParser.ReadAttb(ATTB_LAYOUT_SPLIT_FILL, Fill);
<a name="l00259"></a>00259                                 Layout[END].AddSplit(Map, Name, Pos, Size, Fill);
<a name="l00260"></a>00260                             }
<a name="l00261"></a>00261                             <span class="keywordflow">break</span>;
<a name="l00262"></a>00262                         <span class="keywordflow">case</span> TAG_LAYOUT_OUTLINE:
<a name="l00263"></a>00263                             {
<a name="l00264"></a>00264                                 <a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a> Name, Size, Fill;
<a name="l00265"></a>00265                                 XMLParser.ReadAttb(ATTB_LAYOUT_OUTLINE_NAME, Name);
<a name="l00266"></a>00266                                 XMLParser.ReadAttb(ATTB_LAYOUT_OUTLINE_SIZE, Size);
<a name="l00267"></a>00267                                 XMLParser.ReadAttb(ATTB_LAYOUT_OUTLINE_FILL, Fill);
<a name="l00268"></a>00268                                 Layout[END].AddOutline(Map, Name, Size, Fill);
<a name="l00269"></a>00269                             }
<a name="l00270"></a>00270                             <span class="keywordflow">break</span>;
<a name="l00271"></a>00271                         <span class="keywordflow">case</span> TAG_LAYOUT_EXTRA:
<a name="l00272"></a>00272                             {
<a name="l00273"></a>00273                                 <a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a> Name, Width, Height, Fill;
<a name="l00274"></a>00274                                 XMLParser.ReadAttb(ATTB_LAYOUT_EXTRA_NAME, Name);
<a name="l00275"></a>00275                                 XMLParser.ReadAttb(ATTB_LAYOUT_EXTRA_WIDTH, Width);
<a name="l00276"></a>00276                                 XMLParser.ReadAttb(ATTB_LAYOUT_EXTRA_HEIGHT, Height);
<a name="l00277"></a>00277                                 XMLParser.ReadAttb(ATTB_LAYOUT_EXTRA_FILL, Fill);
<a name="l00278"></a>00278                                 Layout[END].AddExtra(Map, Name, Width, Height, Fill);
<a name="l00279"></a>00279                             }
<a name="l00280"></a>00280                             <span class="keywordflow">break</span>;
<a name="l00281"></a>00281                         <span class="keywordflow">case</span> TAG_LAYOUT_VIEW:
<a name="l00282"></a>00282                             {
<a name="l00283"></a>00283                                 <a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a> Name, PosX, PosY, Width, Height, Scroll, Fill;
<a name="l00284"></a>00284                                 XMLParser.ReadAttb(ATTB_LAYOUT_VIEW_NAME, Name);
<a name="l00285"></a>00285                                 XMLParser.ReadAttb(ATTB_LAYOUT_VIEW_POSX, PosX);
<a name="l00286"></a>00286                                 XMLParser.ReadAttb(ATTB_LAYOUT_VIEW_POSY, PosY);
<a name="l00287"></a>00287                                 XMLParser.ReadAttb(ATTB_LAYOUT_VIEW_WIDTH, Width);
<a name="l00288"></a>00288                                 XMLParser.ReadAttb(ATTB_LAYOUT_VIEW_HEIGHT, Height);
<a name="l00289"></a>00289                                 XMLParser.ReadAttb(ATTB_LAYOUT_VIEW_SCROLL, Scroll);
<a name="l00290"></a>00290                                 XMLParser.ReadAttb(ATTB_LAYOUT_VIEW_FILL, Fill);
<a name="l00291"></a>00291                                 Layout[END].AddView(Map, Name, PosX, PosY, Width, Height, Scroll, Fill);
<a name="l00292"></a>00292                             }
<a name="l00293"></a>00293                             <span class="keywordflow">break</span>;
<a name="l00294"></a>00294                         }
<a name="l00295"></a>00295                         <span class="keywordflow">if</span>(State == BxXml::OPEN)
<a name="l00296"></a>00296                             Layout[END].Push(END);
<a name="l00297"></a>00297                     }
<a name="l00298"></a>00298                     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(State == BxXml::CLOSE)
<a name="l00299"></a>00299                     {
<a name="l00300"></a>00300                         Layout[END].Pull();
<a name="l00301"></a>00301                     }
<a name="l00302"></a>00302                 }
<a name="l00303"></a>00303                 <span class="comment">// 컨텐트</span>
<a name="l00304"></a>00304                 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="class_bx_scene_object.html#a94c0076a3381b646504fe5833585d597">CurSection</a> == InContent)
<a name="l00305"></a>00305                 {
<a name="l00306"></a>00306                     <span class="keywordflow">if</span>(State == BxXml::OPEN || State == BxXml::OPENCLOSE)
<a name="l00307"></a>00307                     {
<a name="l00308"></a>00308                         <span class="keywordflow">switch</span>(TAG)
<a name="l00309"></a>00309                         {
<a name="l00310"></a>00310                         <span class="keywordflow">case</span> TAG_CONTENT_COLOR:
<a name="l00311"></a>00311                             {
<a name="l00312"></a>00312                                 <a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a> Name, Argb;
<a name="l00313"></a>00313                                 XMLParser.ReadAttb(ATTB_CONTENT_COLOR_NAME, Name);
<a name="l00314"></a>00314                                 XMLParser.ReadAttb(ATTB_CONTENT_COLOR_ARGB, Argb);
<a name="l00315"></a>00315                                 Content[END].AddColor(Map, Name, Argb);
<a name="l00316"></a>00316                             }
<a name="l00317"></a>00317                             <span class="keywordflow">break</span>;
<a name="l00318"></a>00318                         <span class="keywordflow">case</span> TAG_CONTENT_EDGE:
<a name="l00319"></a>00319                             {
<a name="l00320"></a>00320                                 <a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a> Name, Colors;
<a name="l00321"></a>00321                                 XMLParser.ReadAttb(ATTB_CONTENT_EDGE_NAME, Name);
<a name="l00322"></a>00322                                 XMLParser.ReadAttb(ATTB_CONTENT_EDGE_COLORS, Colors);
<a name="l00323"></a>00323                                 Content[END].AddEdge(Map, Name, Colors);
<a name="l00324"></a>00324                             }
<a name="l00325"></a>00325                             <span class="keywordflow">break</span>;
<a name="l00326"></a>00326                         <span class="keywordflow">case</span> TAG_CONTENT_IMAGE:
<a name="l00327"></a>00327                             {
<a name="l00328"></a>00328                                 <a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a> Name, Url;
<a name="l00329"></a>00329                                 XMLParser.ReadAttb(ATTB_CONTENT_IMAGE_NAME, Name);
<a name="l00330"></a>00330                                 XMLParser.ReadAttb(ATTB_CONTENT_IMAGE_URL, Url);
<a name="l00331"></a>00331                                 Content[END].AddImage(Map, Name, Url);
<a name="l00332"></a>00332                             }
<a name="l00333"></a>00333                             <span class="keywordflow">break</span>;
<a name="l00334"></a>00334                         <span class="keywordflow">case</span> TAG_CONTENT_SPRITE:
<a name="l00335"></a>00335                             {
<a name="l00336"></a>00336                                 <a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a> Name, Images, Delay;
<a name="l00337"></a>00337                                 XMLParser.ReadAttb(ATTB_CONTENT_SPRITE_NAME, Name);
<a name="l00338"></a>00338                                 XMLParser.ReadAttb(ATTB_CONTENT_SPRITE_IMAGES, Images);
<a name="l00339"></a>00339                                 XMLParser.ReadAttb(ATTB_CONTENT_SPRITE_DELAY, Delay);
<a name="l00340"></a>00340                                 Content[END].AddSprite(Map, Name, Images, Delay);
<a name="l00341"></a>00341                             }
<a name="l00342"></a>00342                             <span class="keywordflow">break</span>;
<a name="l00343"></a>00343                         <span class="keywordflow">case</span> TAG_CONTENT_FONT:
<a name="l00344"></a>00344                             {
<a name="l00345"></a>00345                                 <a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a> Name, Size, Url;
<a name="l00346"></a>00346                                 XMLParser.ReadAttb(ATTB_CONTENT_FONT_NAME, Name);
<a name="l00347"></a>00347                                 XMLParser.ReadAttb(ATTB_CONTENT_FONT_SIZE, Size);
<a name="l00348"></a>00348                                 XMLParser.ReadAttb(ATTB_CONTENT_FONT_URL, Url);
<a name="l00349"></a>00349                                 Content[END].AddFont(Map, Name, Size, Url);
<a name="l00350"></a>00350                             }
<a name="l00351"></a>00351                             <span class="keywordflow">break</span>;
<a name="l00352"></a>00352                         <span class="keywordflow">case</span> TAG_CONTENT_TEXT:
<a name="l00353"></a>00353                             {
<a name="l00354"></a>00354                                 <a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a> Name, Format, Font, Color, Vector, Line;
<a name="l00355"></a>00355                                 XMLParser.ReadAttb(ATTB_CONTENT_TEXT_NAME, Name);
<a name="l00356"></a>00356                                 XMLParser.ReadAttb(ATTB_CONTENT_TEXT_FORMAT, Format);
<a name="l00357"></a>00357                                 XMLParser.ReadAttb(ATTB_CONTENT_TEXT_FONT, Font);
<a name="l00358"></a>00358                                 XMLParser.ReadAttb(ATTB_CONTENT_TEXT_COLOR, Color);
<a name="l00359"></a>00359                                 XMLParser.ReadAttb(ATTB_CONTENT_TEXT_VECTOR, Vector);
<a name="l00360"></a>00360                                 XMLParser.ReadAttb(ATTB_CONTENT_TEXT_LINE, Line);
<a name="l00361"></a>00361                                 Content[END].AddText(Map, Name, Format, Font, Color, Vector, Line);
<a name="l00362"></a>00362                             }
<a name="l00363"></a>00363                             <span class="keywordflow">break</span>;
<a name="l00364"></a>00364                         <span class="keywordflow">case</span> TAG_CONTENT_BUTTON:
<a name="l00365"></a>00365                             {
<a name="l00366"></a>00366                                 <a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a> Name, Images, Edges, Event, Link;
<a name="l00367"></a>00367                                 XMLParser.ReadAttb(ATTB_CONTENT_BUTTON_NAME, Name);
<a name="l00368"></a>00368                                 XMLParser.ReadAttb(ATTB_CONTENT_BUTTON_IMAGES, Images);
<a name="l00369"></a>00369                                 XMLParser.ReadAttb(ATTB_CONTENT_BUTTON_EDGES, Edges);
<a name="l00370"></a>00370                                 XMLParser.ReadAttb(ATTB_CONTENT_BUTTON_EVENT, Event);
<a name="l00371"></a>00371                                 XMLParser.ReadAttb(ATTB_CONTENT_BUTTON_LINK, Link);
<a name="l00372"></a>00372                                 Content[END].AddButton(Map, Name, Images, Edges, Event, Link);
<a name="l00373"></a>00373                             }
<a name="l00374"></a>00374                             <span class="keywordflow">break</span>;
<a name="l00375"></a>00375                         <span class="keywordflow">case</span> TAG_CONTENT_EDITBOX:
<a name="l00376"></a>00376                             {
<a name="l00377"></a>00377                                 <a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a> Name, Text, Colors;
<a name="l00378"></a>00378                                 XMLParser.ReadAttb(ATTB_CONTENT_EDITBOX_NAME, Name);
<a name="l00379"></a>00379                                 XMLParser.ReadAttb(ATTB_CONTENT_EDITBOX_TEXT, Text);
<a name="l00380"></a>00380                                 XMLParser.ReadAttb(ATTB_CONTENT_EDITBOX_COLORS, Colors);
<a name="l00381"></a>00381                                 Content[END].AddEditBox(Map, Name, Text, Colors);
<a name="l00382"></a>00382                             }
<a name="l00383"></a>00383                             <span class="keywordflow">break</span>;
<a name="l00384"></a>00384                         }
<a name="l00385"></a>00385                     }
<a name="l00386"></a>00386                 }
<a name="l00387"></a>00387             }
<a name="l00388"></a>00388             XMLParser.ReadEnd();
<a name="l00389"></a>00389             <span class="comment">// 가공작업(1단계)</span>
<a name="l00390"></a>00390             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; Layout.Length(); ++i)
<a name="l00391"></a>00391                 Layout[i].PreProcessing();
<a name="l00392"></a>00392             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; Content.Length(); ++i)
<a name="l00393"></a>00393                 Content[i].PreProcessing(Map);
<a name="l00394"></a>00394             <span class="comment">// 가공작업(2단계)</span>
<a name="l00395"></a>00395             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; Layout.Length(); ++i)
<a name="l00396"></a>00396                 Layout[i].Processing();
<a name="l00397"></a>00397             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; Content.Length(); ++i)
<a name="l00398"></a>00398                 Content[i].Processing(Map);
<a name="l00399"></a>00399             <span class="comment">// 상호연결</span>
<a name="l00400"></a>00400             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; Layout.Length(); ++i)
<a name="l00401"></a>00401                 Layout[i].Linking(Map);
<a name="l00402"></a>00402             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; Content.Length(); ++i)
<a name="l00403"></a>00403                 Content[i].Linking(Map);
<a name="l00404"></a>00404         }
<a name="l00405"></a>00405     }
<a name="l00406"></a>00406 
<a name="l00407"></a>00407     <span class="keywordtype">bool</span> AdjustSplitSize(<span class="keywordtype">string</span> SplitName, <span class="keywordtype">int</span> SizeBy1024 = 0)
<a name="l00408"></a>00408     {
<a name="l00409"></a>00409         <span class="keywordflow">if</span>(!Map.Access(SplitName)) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00410"></a>00410         Layout::Split* SplitElement = (Layout::Split*) *Map.Access(SplitName);
<a name="l00411"></a>00411         <span class="keywordflow">if</span>(!SplitElement || SplitElement-&gt;GetType() != TypeSplit) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00412"></a>00412         SplitElement-&gt;AdjustSize(SizeBy1024);
<a name="l00413"></a>00413         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00414"></a>00414     }
<a name="l00415"></a>00415 
<a name="l00416"></a>00416     <span class="keywordtype">bool</span> AdjustViewScroll(<span class="keywordtype">string</span> ViewName, <a class="code" href="structpoint.html" title="point구조체 : x, y">point</a> PosByPixel = point::zero())
<a name="l00417"></a>00417     {
<a name="l00418"></a>00418         <span class="keywordflow">if</span>(!Map.Access(ViewName)) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00419"></a>00419         Layout::View* ViewElement = (Layout::View*) *Map.Access(ViewName);
<a name="l00420"></a>00420         <span class="keywordflow">if</span>(!ViewElement || ViewElement-&gt;GetType() != TypeView) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00421"></a>00421         ViewElement-&gt;AdjustScroll(PosByPixel.x, PosByPixel.y);
<a name="l00422"></a>00422         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00423"></a>00423     }
<a name="l00424"></a>00424 
<a name="l00425"></a>00425     <span class="keywordtype">bool</span> GetViewSize(<span class="keywordtype">string</span> ViewName, <a class="code" href="structsize.html" title="size구조체 : w, h">size</a>&amp; OutSize, <a class="code" href="structsize.html" title="size구조체 : w, h">size</a>&amp; InSize)
<a name="l00426"></a>00426     {
<a name="l00427"></a>00427         <span class="keywordflow">if</span>(!Map.Access(ViewName)) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00428"></a>00428         Layout::View* ViewElement = (Layout::View*) *Map.Access(ViewName);
<a name="l00429"></a>00429         <span class="keywordflow">if</span>(!ViewElement || ViewElement-&gt;GetType() != TypeView) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00430"></a>00430         <span class="keywordflow">return</span> ViewElement-&gt;GetSize(OutSize, InSize);
<a name="l00431"></a>00431     }
<a name="l00432"></a>00432 
<a name="l00433"></a>00433     <span class="keywordtype">bool</span> AdjustColorHLS(<span class="keywordtype">string</span> ColorName, <span class="keywordtype">int</span> AddHBy256 = 0, <span class="keywordtype">int</span> AddLBy255 = 0, <span class="keywordtype">int</span> AddSBy255 = 0)
<a name="l00434"></a>00434     {
<a name="l00435"></a>00435         <span class="keywordflow">if</span>(!Map.Access(ColorName)) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00436"></a>00436         Content::Color* ColorElement = (Content::Color*) *Map.Access(ColorName);
<a name="l00437"></a>00437         <span class="keywordflow">if</span>(!ColorElement || ColorElement-&gt;GetType() != TypeColor) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00438"></a>00438         ColorElement-&gt;AdjustHLS(AddHBy256, AddLBy255, AddSBy255);
<a name="l00439"></a>00439         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00440"></a>00440     }
<a name="l00441"></a>00441 
<a name="l00442"></a>00442     <span class="keywordtype">bool</span> AdjustTextFormat(<span class="keywordtype">string</span> TextName, ...)
<a name="l00443"></a>00443     {
<a name="l00444"></a>00444         <span class="keywordflow">if</span>(!Map.Access(TextName)) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00445"></a>00445         Content::Text* TextElement = (Content::Text*) *Map.Access(TextName);
<a name="l00446"></a>00446         <span class="keywordflow">if</span>(!TextElement || TextElement-&gt;GetType() != TypeText) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00447"></a>00447         va_list List;
<a name="l00448"></a>00448         va_start(List, TextName);
<a name="l00449"></a>00449         TextElement-&gt;AdjustFormat(<span class="keyword">true</span>, List, &amp;Map, null);
<a name="l00450"></a>00450         va_end(List);
<a name="l00451"></a>00451         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00452"></a>00452     }
<a name="l00453"></a>00453 
<a name="l00454"></a>00454     <span class="keywordtype">void</span> Render(<a class="code" href="class_bx_draw.html" title="OpenGL/SW랜더링기반 그리기도구">BxDraw</a>&amp; Draw)
<a name="l00455"></a>00455     {
<a name="l00456"></a>00456         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; Layout.Length(); ++i)
<a name="l00457"></a>00457             Layout[i].Rendering(Map, Draw, BxDrawGlobal::XYWH(0, 0, Draw.<a class="code" href="class_bx_draw.html#a629c65ebda9be9d1dd7c507a30557eb8" title="현재 너비얻기">Width</a>(), Draw.<a class="code" href="class_bx_draw.html#a378f6d7988a5a667fd3e720c25e6a297" title="현재 높이얻기">Height</a>()));
<a name="l00458"></a>00458     }
<a name="l00459"></a>00459 
<a name="l00460"></a>00460     <span class="keywordtype">bool</span> OnEvent(<span class="keyword">const</span> <a class="code" href="structsysevent.html" title="OnEvent()의 이벤트파라미터">sysevent</a>&amp; Event)
<a name="l00461"></a>00461     {
<a name="l00462"></a>00462         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = Layout.Length() - 1; 0 &lt;= i; --i)
<a name="l00463"></a>00463             <span class="keywordflow">if</span>(Layout[i].OnEvent(Event))
<a name="l00464"></a>00464                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00465"></a>00465         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00466"></a>00466     }
<a name="l00467"></a>00467 
<a name="l00468"></a>00468 <span class="keyword">protected</span>:
<a name="l00470"></a>00470     <span class="keyword">enum</span> Section {NoSection, InSceneObject, InLayout, InContent};
<a name="l00471"></a>00471     <span class="keyword">enum</span> ElementType {TypeNull, TypeValue, TypeColor, TypeEdge, TypeImage, TypeSprite, TypeFont, TypeText, TypeButton, TypeEditBox,
<a name="l00472"></a>00472         TypeSplit, TypeOutline, TypeExtra, TypeView};
<a name="l00473"></a>00473     <span class="keyword">enum</span> ElementStep {StepAlloced, StepNamed, StepPreProcessed, StepProcessed, StepLinked};
<a name="l00474"></a>00474     <span class="keyword">enum</span> ReserveCode {CodeNull = -1, CodeLeft = 0, CodeTop, CodeRight, CodeBottom, CodeHide = 0, CodeShow,
<a name="l00475"></a>00475         CodeNumpad1 = 0, CodeNumpad2, CodeNumpad3, CodeNumpad4, CodeNumpad5, CodeNumpad6, CodeNumpad7, CodeNumpad8, CodeNumpad9,
<a name="l00476"></a>00476         CodeSingle = 0, CodeMulti};
<a name="l00478"></a>00478 
<a name="l00480"></a>00480     <span class="keyword">class </span>Element
<a name="l00481"></a>00481     {
<a name="l00482"></a>00482     <span class="keyword">protected</span>:
<a name="l00483"></a>00483         ElementType Type;
<a name="l00484"></a>00484         ElementStep Step;
<a name="l00485"></a>00485         <span class="keywordtype">int</span> Value;
<a name="l00486"></a>00486     <span class="keyword">public</span>:
<a name="l00487"></a>00487         Element() : Type(TypeNull), Step(StepAlloced), Value(0) {}
<a name="l00488"></a>00488         Element(<span class="keyword">const</span> <span class="keywordtype">int</span> FirstValue) : Type(TypeValue), Step(StepAlloced), Value(FirstValue) {}
<a name="l00489"></a>00489         <span class="keyword">virtual</span> ~Element() {}
<a name="l00490"></a>00490     <span class="keyword">public</span>:
<a name="l00491"></a>00491         ElementType GetType() {<span class="keywordflow">return</span> Type;}
<a name="l00492"></a>00492         <span class="keyword">const</span> <span class="keywordtype">int</span> GetValue()
<a name="l00493"></a>00493         {
<a name="l00494"></a>00494             BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;값보관용 엘리먼트가 아닙니다&gt;&quot;</span>, Type == TypeValue);
<a name="l00495"></a>00495             <span class="keywordflow">return</span> Value;
<a name="l00496"></a>00496         }
<a name="l00497"></a>00497         <span class="keywordtype">void</span> SetValue(<span class="keyword">const</span> <span class="keywordtype">int</span> SecondValue)
<a name="l00498"></a>00498         {
<a name="l00499"></a>00499             BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;값보관용 엘리먼트가 아닙니다&gt;&quot;</span>, Type == TypeValue);
<a name="l00500"></a>00500             Value = SecondValue;
<a name="l00501"></a>00501         }
<a name="l00502"></a>00502     <span class="keyword">public</span>:
<a name="l00503"></a>00503         <span class="keywordtype">void</span> SetStep(ElementStep StepOrder)
<a name="l00504"></a>00504         {
<a name="l00505"></a>00505             <span class="keywordflow">switch</span>(StepOrder)
<a name="l00506"></a>00506             {
<a name="l00507"></a>00507             <span class="keywordflow">case</span> StepNamed: BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;호출단계가 잘못되었습니다&gt;&quot;</span>, Step == StepAlloced); <span class="keywordflow">break</span>;
<a name="l00508"></a>00508             <span class="keywordflow">case</span> StepPreProcessed: BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;호출단계가 잘못되었습니다&gt;&quot;</span>, Step == StepNamed); <span class="keywordflow">break</span>;
<a name="l00509"></a>00509             <span class="keywordflow">case</span> StepProcessed: BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;호출단계가 잘못되었습니다&gt;&quot;</span>, Step == StepPreProcessed); <span class="keywordflow">break</span>;
<a name="l00510"></a>00510             <span class="keywordflow">case</span> StepLinked: BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;호출단계가 잘못되었습니다&gt;&quot;</span>, Step == StepProcessed); <span class="keywordflow">break</span>;
<a name="l00511"></a>00511             }
<a name="l00512"></a>00512             Step = StepOrder;
<a name="l00513"></a>00513         }
<a name="l00514"></a>00514     <span class="keyword">public</span>:
<a name="l00515"></a>00515         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> IsValidFill() {<span class="keywordflow">return</span> (Type != TypeValue);}
<a name="l00516"></a>00516         <span class="keyword">virtual</span> <span class="keywordtype">void</span> PreProcessing(<a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>* Map, <a class="code" href="class_bx_var.html" title="가변배열 제공">BxVar&lt;Element&gt;</a>* Elements) {SetStep(StepPreProcessed);}
<a name="l00517"></a>00517         <span class="keyword">virtual</span> <span class="keywordtype">void</span> Processing(<a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>* Map, <a class="code" href="class_bx_var.html" title="가변배열 제공">BxVar&lt;Element&gt;</a>* Elements) {SetStep(StepProcessed);}
<a name="l00518"></a>00518         <span class="keyword">virtual</span> <span class="keywordtype">void</span> Linking(<span class="keyword">const</span> <a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map) {SetStep(StepLinked);}
<a name="l00519"></a>00519         <span class="keyword">virtual</span> <span class="keywordtype">void</span> Filling(<a class="code" href="class_bx_draw.html" title="OpenGL/SW랜더링기반 그리기도구">BxDraw</a>&amp; Draw, <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> Rect) {}
<a name="l00520"></a>00520         <span class="keyword">virtual</span> <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> Rendering(<span class="keyword">const</span> <a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map, <a class="code" href="class_bx_draw.html" title="OpenGL/SW랜더링기반 그리기도구">BxDraw</a>&amp; Draw, <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> Rect, <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> _out_ InRect) {<span class="keywordflow">return</span> rect::zero();}
<a name="l00521"></a>00521         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> OnEvent(<span class="keyword">const</span> <a class="code" href="structsysevent.html" title="OnEvent()의 이벤트파라미터">sysevent</a>&amp; SysEvent) {<span class="keywordflow">return</span> <span class="keyword">false</span>;}
<a name="l00522"></a>00522     <span class="keyword">protected</span>:
<a name="l00523"></a>00523         <span class="keywordtype">bool</span> DownloadCache(<span class="keywordtype">string</span> url, <a class="code" href="class_bx_web_content.html" title="HTTP기반 쿼리송수신, 파일다운로드">BxWebContent</a> _out_ Content, <span class="keywordtype">int</span> _out_ FileSize, <span class="keywordtype">string</span> _out_ FilePath, <span class="keywordtype">bool</span> DoLoad)
<a name="l00524"></a>00524         {
<a name="l00525"></a>00525             <a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a> QueryArg(<span class="stringliteral">&quot;subject=%s&amp;file=%s&amp;version=%d&quot;</span>, null, (<span class="keywordtype">string</span>) BxSceneObject::Subject(), url, BxSceneObject::Version());
<a name="l00526"></a>00526             <a class="code" href="class_bx_web_content.html" title="HTTP기반 쿼리송수신, 파일다운로드">BxWebContent</a> Web;
<a name="l00527"></a>00527             <span class="keywordflow">if</span>(Web.<a class="code" href="class_bx_web_content.html#a53adbac7a2b2d510ed3b3a4b7d27db26" title="HTTP쿼리실행">Query</a>(BxSceneObject::Domain(), 80, <span class="stringliteral">&quot;update/res_download_cdn.aspx&quot;</span>, QueryArg))
<a name="l00528"></a>00528             {
<a name="l00529"></a>00529                 <span class="keywordtype">string</span> QueryResult = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>((<span class="keywordtype">string</span>) Web.<a class="code" href="class_bx_web_content.html#a378dffe3154698e8b9f6fd67e2631050" title="쿼리결과 받기">GetBytes</a>(), Web.<a class="code" href="class_bx_web_content.html#a2c1ae12564be5f2b1880ad56966fd38c" title="쿼리결과의 사이즈얻기(스트링)">GetTextLength</a>());
<a name="l00530"></a>00530                 <a class="code" href="class_bx_var.html">BxVar&lt;BxString&gt;</a> QueryResults;
<a name="l00531"></a>00531                 <a class="code" href="class_bx_string.html#a79578e9b83b5373ebcef438bba4c99a9" title="스트링 나누기">BxString::ParseDivision</a>(QueryResult, QueryResults);
<a name="l00532"></a>00532                 <span class="keywordflow">if</span>(QueryResults.Length() == 3 &amp;&amp; <a class="code" href="namespace_bx_util_global.html#a9d45cf5f144f0aaa40fa169feb915ea1" title="스트링을 정수로 변환">BxUtilGlobal::AtoI</a>(QueryResults[0]) == 1)
<a name="l00533"></a>00533                 {
<a name="l00534"></a>00534                     FileSize = <a class="code" href="namespace_bx_util_global.html#a9d45cf5f144f0aaa40fa169feb915ea1" title="스트링을 정수로 변환">BxUtilGlobal::AtoI</a>(QueryResults[1]);
<a name="l00535"></a>00535                     <a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a> FilePathString(<span class="stringliteral">&quot;update/%s&quot;</span>, null, (<span class="keywordtype">string</span>) QueryResults[2]);
<a name="l00536"></a>00536                     FilePath = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(FilePathString);
<a name="l00537"></a>00537                     <span class="keywordflow">if</span>(Content.Cache(BxSceneObject::Domain(), 80, FilePath, FileSize, DoLoad))
<a name="l00538"></a>00538                     {
<a name="l00539"></a>00539                         BxFree(QueryResult);
<a name="l00540"></a>00540                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00541"></a>00541                     }
<a name="l00542"></a>00542                 }
<a name="l00543"></a>00543                 BxFree(QueryResult);
<a name="l00544"></a>00544             }
<a name="l00545"></a>00545             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00546"></a>00546         }
<a name="l00547"></a>00547     };
<a name="l00549"></a>00549 
<a name="l00551"></a>00551     <span class="keyword">class </span>ElementTree : <span class="keyword">public</span> Element
<a name="l00552"></a>00552     {
<a name="l00553"></a>00553     <span class="keyword">protected</span>:
<a name="l00554"></a>00554         ElementTree* _ref_ Parent;
<a name="l00555"></a>00555         <a class="code" href="class_bx_var.html" title="가변배열 제공">BxVar&lt;ElementTree&gt;</a> Child;
<a name="l00556"></a>00556     <span class="keyword">public</span>:
<a name="l00557"></a>00557         ElementTree() : Parent(null) {}
<a name="l00558"></a>00558         <span class="keyword">virtual</span> ~ElementTree()
<a name="l00559"></a>00559         {
<a name="l00560"></a>00560             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; Child.Length(); ++i)
<a name="l00561"></a>00561             {
<a name="l00562"></a>00562                 ElementTree* OldData = null;
<a name="l00563"></a>00563                 Child.RemoveData(i, &amp;OldData);
<a name="l00564"></a>00564                 BxDelete(OldData);
<a name="l00565"></a>00565             }
<a name="l00566"></a>00566         }
<a name="l00567"></a>00567     <span class="keyword">public</span>:
<a name="l00568"></a>00568         <span class="keywordtype">void</span> AddChild(ElementTree* elementtree)
<a name="l00569"></a>00569         {
<a name="l00570"></a>00570             elementtree-&gt;Parent = <span class="keyword">this</span>;
<a name="l00571"></a>00571             Child.Insert(LAST, elementtree);
<a name="l00572"></a>00572         }
<a name="l00573"></a>00573         ElementTree* GetParent() {<span class="keywordflow">return</span> Parent;}
<a name="l00574"></a>00574         ElementTree* GetChild(<span class="keywordtype">int</span> i) {<span class="keywordflow">return</span> Child.Access(i);}
<a name="l00575"></a>00575     <span class="keyword">public</span>:
<a name="l00576"></a>00576         <span class="keywordtype">void</span> PreProcessingTree()
<a name="l00577"></a>00577         {
<a name="l00578"></a>00578             <span class="keywordflow">if</span>(Parent) PreProcessing(null, null);
<a name="l00579"></a>00579             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; Child.Length(); ++i)
<a name="l00580"></a>00580                 Child[i].PreProcessingTree();
<a name="l00581"></a>00581         }
<a name="l00582"></a>00582         <span class="keywordtype">void</span> ProcessingTree()
<a name="l00583"></a>00583         {
<a name="l00584"></a>00584             <span class="keywordflow">if</span>(Parent) Processing(null, null);
<a name="l00585"></a>00585             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; Child.Length(); ++i)
<a name="l00586"></a>00586                 Child[i].ProcessingTree();
<a name="l00587"></a>00587         }
<a name="l00588"></a>00588         <span class="keywordtype">void</span> LinkingTree(<span class="keyword">const</span> <a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map)
<a name="l00589"></a>00589         {
<a name="l00590"></a>00590             <span class="keywordflow">if</span>(Parent) Linking(Map);
<a name="l00591"></a>00591             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; Child.Length(); ++i)
<a name="l00592"></a>00592                 Child[i].LinkingTree(Map);
<a name="l00593"></a>00593         }
<a name="l00594"></a>00594         <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> RenderingTree(<span class="keyword">const</span> <a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map, <a class="code" href="class_bx_draw.html" title="OpenGL/SW랜더링기반 그리기도구">BxDraw</a>&amp; Draw, <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> Rect)
<a name="l00595"></a>00595         {
<a name="l00596"></a>00596             <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> OutRect = Rect, InRect = Rect;
<a name="l00597"></a>00597             <span class="keywordflow">if</span>(Draw.<a class="code" href="class_bx_draw.html#af11467c2017eb776b2a89e9144e9e413" title="클리핑고려 스타일옵션 스택추가(if안에서 사용권장)">AddStyleByIf</a>(CLIP(Rect, -Rect.l, -Rect.t)))
<a name="l00598"></a>00598             {
<a name="l00599"></a>00599                 <span class="keywordflow">if</span>(Parent) OutRect = Rendering(Map, Draw, Rect, InRect);
<a name="l00600"></a>00600                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; Child.Length(); ++i)
<a name="l00601"></a>00601                     InRect = Child[i].RenderingTree(Map, Draw, InRect);
<a name="l00602"></a>00602                 Draw.<a class="code" href="class_bx_draw.html#a0f0ad44b174221300cc2ac99afbc5325" title="스타일옵션 스택해제">SubStyle</a>();
<a name="l00603"></a>00603             }
<a name="l00604"></a>00604             <span class="keywordflow">return</span> OutRect;
<a name="l00605"></a>00605         }
<a name="l00606"></a>00606         <span class="keywordtype">bool</span> OnEventTree(<span class="keyword">const</span> <a class="code" href="structsysevent.html" title="OnEvent()의 이벤트파라미터">sysevent</a>&amp; Event)
<a name="l00607"></a>00607         {
<a name="l00608"></a>00608             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = Child.Length() - 1; 0 &lt;= i; --i)
<a name="l00609"></a>00609                 <span class="keywordflow">if</span>(Child[i].OnEventTree(Event)) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00610"></a>00610             <span class="keywordflow">return</span> OnEvent(Event);
<a name="l00611"></a>00611         }
<a name="l00612"></a>00612     };
<a name="l00614"></a>00614 
<a name="l00616"></a>00616     <span class="keyword">class </span>Content
<a name="l00617"></a>00617     {
<a name="l00618"></a>00618     <span class="keyword">protected</span>:
<a name="l00619"></a>00619         <a class="code" href="class_bx_var.html" title="가변배열 제공">BxVar&lt;Element&gt;</a> Elements;
<a name="l00620"></a>00620     <span class="keyword">public</span>:
<a name="l00621"></a>00621         <span class="keyword">class </span>Color : <span class="keyword">public</span> Element
<a name="l00622"></a>00622         {
<a name="l00623"></a>00623             <span class="keywordtype">string</span> Name;
<a name="l00624"></a>00624             uint Argb;
<a name="l00625"></a>00625         <span class="keyword">protected</span>:
<a name="l00626"></a>00626             uint ArgbGen;
<a name="l00627"></a>00627         <span class="keyword">public</span>:
<a name="l00628"></a>00628             Color() : Name(null), Argb(0xFF000000), ArgbGen(0xFF000000) {Type = TypeColor;}
<a name="l00629"></a>00629             <span class="keyword">virtual</span> ~Color()
<a name="l00630"></a>00630             {
<a name="l00631"></a>00631                 BxFree(Name);
<a name="l00632"></a>00632             }
<a name="l00633"></a>00633         <span class="keyword">public</span>:
<a name="l00634"></a>00634             <span class="keywordtype">void</span> SetAttb(<span class="keywordtype">string</span> name, <span class="keywordtype">string</span> argb)
<a name="l00635"></a>00635             {
<a name="l00636"></a>00636                 SetStep(StepNamed);
<a name="l00637"></a>00637                 Name = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(name);
<a name="l00638"></a>00638                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; argb[i]; ++i)
<a name="l00639"></a>00639                 {
<a name="l00640"></a>00640                     <span class="keywordflow">if</span>(<span class="charliteral">&#39;0&#39;</span> &lt;= argb[i] &amp;&amp; argb[i] &lt;= <span class="charliteral">&#39;9&#39;</span>)
<a name="l00641"></a>00641                         Argb = (Argb &lt;&lt; 4) | (argb[i] - <span class="charliteral">&#39;0&#39;</span>);
<a name="l00642"></a>00642                     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<span class="charliteral">&#39;A&#39;</span> &lt;= argb[i] &amp;&amp; argb[i] &lt;= <span class="charliteral">&#39;F&#39;</span>)
<a name="l00643"></a>00643                         Argb = (Argb &lt;&lt; 4) | (argb[i] - <span class="charliteral">&#39;A&#39;</span> + 10);
<a name="l00644"></a>00644                     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<span class="charliteral">&#39;a&#39;</span> &lt;= argb[i] &amp;&amp; argb[i] &lt;= <span class="charliteral">&#39;f&#39;</span>)
<a name="l00645"></a>00645                         Argb = (Argb &lt;&lt; 4) | (argb[i] - <span class="charliteral">&#39;a&#39;</span> + 10);
<a name="l00646"></a>00646                 }
<a name="l00647"></a>00647                 ArgbGen = Argb;
<a name="l00648"></a>00648             }
<a name="l00649"></a>00649             <span class="keywordtype">void</span> AdjustHLS(<span class="keywordtype">int</span> AddHBy256, <span class="keywordtype">int</span> AddLBy255, <span class="keywordtype">int</span> AddSBy255)
<a name="l00650"></a>00650             {
<a name="l00651"></a>00651                 <span class="keyword">const</span> color_x888 HLS = <a class="code" href="namespace_bx_draw_global.html#aed0fdc6eea4a4727834a7650ea945353" title="색상전환(RGB→HLS)">BxDrawGlobal::ColorRGBToHLS</a>((Argb &gt;&gt; 16) &amp; 0xFF, (Argb &gt;&gt; 8) &amp; 0xFF, Argb &amp; 0xFF);
<a name="l00652"></a>00652                 <span class="keyword">const</span> byte H = (byte) ((((HLS &gt;&gt; 16) &amp; 0xFF) + AddHBy256) &amp; 0xFF);
<a name="l00653"></a>00653                 <span class="keyword">const</span> byte L = (byte) <a class="code" href="namespace_bx_util_global.html#ab3bbc4ea5f14c15a837e50f2a216271e" title="최소최대 한계설정">BxUtilGlobal::MinMax</a>(0, ((HLS &gt;&gt; 8) &amp; 0xFF) + AddLBy255, 0xFF);
<a name="l00654"></a>00654                 <span class="keyword">const</span> byte S = (byte) <a class="code" href="namespace_bx_util_global.html#ab3bbc4ea5f14c15a837e50f2a216271e" title="최소최대 한계설정">BxUtilGlobal::MinMax</a>(0, (HLS &amp; 0xFF) + AddSBy255, 0xFF);
<a name="l00655"></a>00655                 ArgbGen = (Argb &amp; 0xFF000000) | <a class="code" href="namespace_bx_draw_global.html#a376b7e70661a03530504bcf0c80c9c58" title="색상전환(HLS→RGB)">BxDrawGlobal::ColorHLSToRGB</a>(H, L, S);
<a name="l00656"></a>00656             }
<a name="l00657"></a>00657             <span class="keyword">inline</span> <span class="keyword">const</span> uint GetArgb() {<span class="keywordflow">return</span> ArgbGen;}
<a name="l00658"></a>00658         <span class="keyword">public</span>:
<a name="l00659"></a>00659             <span class="keyword">virtual</span> <span class="keywordtype">void</span> Filling(<a class="code" href="class_bx_draw.html" title="OpenGL/SW랜더링기반 그리기도구">BxDraw</a>&amp; Draw, <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> Rect)
<a name="l00660"></a>00660             {
<a name="l00661"></a>00661                 Draw.<a class="code" href="class_bx_draw.html#a8e76967347f6897a6a65289138b72b6b" title="사각형출력">Rectangle</a>(BxDrawGlobal::FILL, Rect,
<a name="l00662"></a>00662                     <a class="code" href="namespace_bx_draw_global.html#a995e3167e7c9bf9892c0ffb3261120c2" title="스타일-컬러링(byte)">BxDrawGlobal::COLOR</a>(ArgbGen &amp; 0x00FFFFFF) + <a class="code" href="namespace_bx_draw_global.html#a1b0e942d04e48b394fc70d30c3897cb9" title="스타일-불투명도">BxDrawGlobal::OPACITY</a>(ArgbGen &gt;&gt; 24));
<a name="l00663"></a>00663             }
<a name="l00664"></a>00664         };
<a name="l00665"></a>00665         <span class="keyword">class </span>Edge : <span class="keyword">public</span> Element
<a name="l00666"></a>00666         {
<a name="l00667"></a>00667             <span class="keywordtype">string</span> Name;
<a name="l00668"></a>00668             <span class="keywordtype">string</span> Colors;
<a name="l00669"></a>00669         <span class="keyword">public</span>:
<a name="l00670"></a>00670             <a class="code" href="class_bx_var.html" title="가변배열 제공">BxVar&lt;Element*&gt;</a> _ref_ ColorValues;
<a name="l00671"></a>00671         <span class="keyword">public</span>:
<a name="l00672"></a>00672             Edge() : Name(null), Colors(null) {Type = TypeEdge;}
<a name="l00673"></a>00673             <span class="keyword">virtual</span> ~Edge()
<a name="l00674"></a>00674             {
<a name="l00675"></a>00675                 BxFree(Name);
<a name="l00676"></a>00676                 BxFree(Colors);
<a name="l00677"></a>00677             }
<a name="l00678"></a>00678         <span class="keyword">public</span>:
<a name="l00679"></a>00679             <span class="keywordtype">void</span> SetAttb(<span class="keywordtype">string</span> name, <span class="keywordtype">string</span> colors)
<a name="l00680"></a>00680             {
<a name="l00681"></a>00681                 SetStep(StepNamed);
<a name="l00682"></a>00682                 Name = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(name);
<a name="l00683"></a>00683                 Colors = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(colors);
<a name="l00684"></a>00684             }
<a name="l00685"></a>00685         <span class="keyword">public</span>:
<a name="l00686"></a>00686             <span class="keyword">virtual</span> <span class="keywordtype">void</span> Linking(<span class="keyword">const</span> <a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map)
<a name="l00687"></a>00687             {
<a name="l00688"></a>00688                 SetStep(StepLinked);
<a name="l00689"></a>00689                 <a class="code" href="class_bx_var.html">BxVar&lt;BxString&gt;</a> ColorNames;
<a name="l00690"></a>00690                 <a class="code" href="class_bx_string.html#a79578e9b83b5373ebcef438bba4c99a9" title="스트링 나누기">BxString::ParseDivision</a>(Colors, ColorNames);
<a name="l00691"></a>00691                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업중 유효한 엘리먼트가 하나도 없습니다&gt;&quot;</span>, ColorNames.Length());
<a name="l00692"></a>00692                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; ColorNames.Length(); ++i)
<a name="l00693"></a>00693                 {
<a name="l00694"></a>00694                     BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업에 실패했습니다&gt;&quot;</span>, Map.Access(ColorNames[i]) &amp;&amp; *Map.Access(ColorNames[i]));
<a name="l00695"></a>00695                     BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업중 타입이 일치하지 않습니다&gt;&quot;</span>, (*Map.Access(ColorNames[i]))-&gt;GetType() == TypeColor);
<a name="l00696"></a>00696                     ColorValues[i] = *Map.Access(ColorNames[i]);
<a name="l00697"></a>00697                 }
<a name="l00698"></a>00698             }
<a name="l00699"></a>00699         };
<a name="l00700"></a>00700         <span class="keyword">class </span>Image : <span class="keyword">public</span> Element
<a name="l00701"></a>00701         {
<a name="l00702"></a>00702             <span class="keywordtype">string</span> Name;
<a name="l00703"></a>00703             <span class="keywordtype">string</span> Url;
<a name="l00704"></a>00704         <span class="keyword">public</span>:
<a name="l00705"></a>00705             <span class="keywordtype">int</span> FileSize;
<a name="l00706"></a>00706             <span class="keywordtype">string</span> FilePath;
<a name="l00707"></a>00707             <a class="code" href="class_bx_image.html" title="이미지 운영">BxImage</a> CacheImage;
<a name="l00708"></a>00708         <span class="keyword">public</span>:
<a name="l00709"></a>00709             Image() : Name(null), Url(null), FileSize(0), FilePath(null) {Type = TypeImage;}
<a name="l00710"></a>00710             <span class="keyword">virtual</span> ~Image()
<a name="l00711"></a>00711             {
<a name="l00712"></a>00712                 BxFree(Name);
<a name="l00713"></a>00713                 BxFree(Url);
<a name="l00714"></a>00714                 BxFree(FilePath);
<a name="l00715"></a>00715             }
<a name="l00716"></a>00716         <span class="keyword">public</span>:
<a name="l00717"></a>00717             <span class="keywordtype">void</span> SetAttb(<span class="keywordtype">string</span> name, <span class="keywordtype">string</span> url)
<a name="l00718"></a>00718             {
<a name="l00719"></a>00719                 SetStep(StepNamed);
<a name="l00720"></a>00720                 Name = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(name);
<a name="l00721"></a>00721                 Url = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(url);
<a name="l00722"></a>00722             }
<a name="l00723"></a>00723         <span class="keyword">public</span>:
<a name="l00724"></a>00724             <span class="keyword">virtual</span> <span class="keywordtype">void</span> Processing(<a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>* Map, <a class="code" href="class_bx_var.html" title="가변배열 제공">BxVar&lt;Element&gt;</a>* Elements)
<a name="l00725"></a>00725             {
<a name="l00726"></a>00726                 SetStep(StepProcessed);
<a name="l00727"></a>00727                 <a class="code" href="class_bx_web_content.html" title="HTTP기반 쿼리송수신, 파일다운로드">BxWebContent</a> Content;
<a name="l00728"></a>00728                 <span class="keywordflow">if</span>(DownloadCache(Url, Content, FileSize, FilePath, <span class="keyword">true</span>))
<a name="l00729"></a>00729                 {
<a name="l00730"></a>00730                     <a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a> FilePathString = FilePath;
<a name="l00731"></a>00731                     <a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a> FileTypeString = FilePathString.<a class="code" href="class_bx_string.html#aacc17b0b1d68f70e37f6c6253271a2e0" title="우측 복사하기">Right</a>(4);
<a name="l00732"></a>00732                     BxImage::type FileType = BxImage::PNG;
<a name="l00733"></a>00733                     <span class="keywordflow">if</span>(FileTypeString.<a class="code" href="class_bx_string.html#aaf31f369dfc9d76a8bd304aebeef4752" title="스트링간 대소문자 구분없는 비교(string)">CompareNoCase</a>(<span class="stringliteral">&quot;.bmp&quot;</span>) == same)
<a name="l00734"></a>00734                         FileType = BxImage::BMP;
<a name="l00735"></a>00735                     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(FileTypeString.<a class="code" href="class_bx_string.html#aaf31f369dfc9d76a8bd304aebeef4752" title="스트링간 대소문자 구분없는 비교(string)">CompareNoCase</a>(<span class="stringliteral">&quot;.b16&quot;</span>) == same)
<a name="l00736"></a>00736                         FileType = BxImage::B16;
<a name="l00737"></a>00737                     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(FileTypeString.<a class="code" href="class_bx_string.html#aaf31f369dfc9d76a8bd304aebeef4752" title="스트링간 대소문자 구분없는 비교(string)">CompareNoCase</a>(<span class="stringliteral">&quot;.b32&quot;</span>) == same)
<a name="l00738"></a>00738                         FileType = BxImage::B32;
<a name="l00739"></a>00739                     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(FileTypeString.<a class="code" href="class_bx_string.html#aaf31f369dfc9d76a8bd304aebeef4752" title="스트링간 대소문자 구분없는 비교(string)">CompareNoCase</a>(<span class="stringliteral">&quot;.png&quot;</span>) == same)
<a name="l00740"></a>00740                         FileType = BxImage::PNG;
<a name="l00741"></a>00741                     CacheImage.Load(Content.<a class="code" href="class_bx_web_content.html#a378dffe3154698e8b9f6fd67e2631050" title="쿼리결과 받기">GetBytes</a>(), FileType);
<a name="l00742"></a>00742                     CacheImage.SetHotspot(0, 0);
<a name="l00743"></a>00743                 }
<a name="l00744"></a>00744                 <span class="comment">// 가로길이 추가등록</span>
<a name="l00745"></a>00745                 <a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a> WidthName(<span class="stringliteral">&quot;%s.width&quot;</span>, null, (<span class="keywordtype">string</span>) Name);
<a name="l00746"></a>00746                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;중복된 컨텐트명입니다&gt;&quot;</span>, !Map-&gt;Access(WidthName));
<a name="l00747"></a>00747                 Element* NewData1 = BxNew_Param(Element, (CacheImage.IsExist())? CacheImage.Width() : 0);
<a name="l00748"></a>00748                 Elements-&gt;Insert(LAST, (*Map)[WidthName] = NewData1);
<a name="l00749"></a>00749                 NewData1-&gt;SetStep(StepNamed);
<a name="l00750"></a>00750                 NewData1-&gt;PreProcessing(null, null);
<a name="l00751"></a>00751                 <span class="comment">// 세로길이 추가등록</span>
<a name="l00752"></a>00752                 <a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a> HeightName(<span class="stringliteral">&quot;%s.height&quot;</span>, null, (<span class="keywordtype">string</span>) Name);
<a name="l00753"></a>00753                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;중복된 컨텐트명입니다&gt;&quot;</span>, !Map-&gt;Access(HeightName));
<a name="l00754"></a>00754                 Element* NewData2 = BxNew_Param(Element, (CacheImage.IsExist())? CacheImage.Height() : 0);
<a name="l00755"></a>00755                 Elements-&gt;Insert(LAST, (*Map)[HeightName] = NewData2);
<a name="l00756"></a>00756                 NewData2-&gt;SetStep(StepNamed);
<a name="l00757"></a>00757                 NewData2-&gt;PreProcessing(null, null);
<a name="l00758"></a>00758             }
<a name="l00759"></a>00759             <span class="keyword">virtual</span> <span class="keywordtype">void</span> Filling(<a class="code" href="class_bx_draw.html" title="OpenGL/SW랜더링기반 그리기도구">BxDraw</a>&amp; Draw, <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> Rect)
<a name="l00760"></a>00760             {
<a name="l00761"></a>00761                 <span class="keywordflow">if</span>(CacheImage.IsExist() &amp;&amp; Draw.<a class="code" href="class_bx_draw.html#af11467c2017eb776b2a89e9144e9e413" title="클리핑고려 스타일옵션 스택추가(if안에서 사용권장)">AddStyleByIf</a>(CLIP(Rect)))
<a name="l00762"></a>00762                 {
<a name="l00763"></a>00763                     Draw.<a class="code" href="class_bx_draw.html#a249991b848bbc125d853007c466312d1" title="형식없는 기본출력">Area</a>(0, 0, <a class="code" href="namespace_bx_draw_global.html#a34fac7d49bf9583a466d8f995993aefc" title="스타일-채우기">BxDrawGlobal::FORM</a>(&amp;CacheImage));
<a name="l00764"></a>00764                     Draw.<a class="code" href="class_bx_draw.html#a0f0ad44b174221300cc2ac99afbc5325" title="스타일옵션 스택해제">SubStyle</a>();
<a name="l00765"></a>00765                 }
<a name="l00766"></a>00766             }
<a name="l00767"></a>00767         };
<a name="l00768"></a>00768         <span class="keyword">class </span>Sprite : <span class="keyword">public</span> Element
<a name="l00769"></a>00769         {
<a name="l00770"></a>00770             <span class="keywordtype">string</span> Name;
<a name="l00771"></a>00771             <span class="keywordtype">string</span> Images;
<a name="l00772"></a>00772             <span class="keywordtype">int</span> Delay;
<a name="l00773"></a>00773         <span class="keyword">public</span>:
<a name="l00774"></a>00774             <a class="code" href="class_bx_var.html" title="가변배열 제공">BxVar&lt;Element*&gt;</a> _ref_ ImageValues;
<a name="l00775"></a>00775         <span class="keyword">public</span>:
<a name="l00776"></a>00776             Sprite() : Name(null), Images(null), Delay(0) {Type = TypeSprite;}
<a name="l00777"></a>00777             <span class="keyword">virtual</span> ~Sprite()
<a name="l00778"></a>00778             {
<a name="l00779"></a>00779                 BxFree(Name);
<a name="l00780"></a>00780                 BxFree(Images);
<a name="l00781"></a>00781             }
<a name="l00782"></a>00782         <span class="keyword">public</span>:
<a name="l00783"></a>00783             <span class="keywordtype">void</span> SetAttb(<span class="keywordtype">string</span> name, <span class="keywordtype">string</span> images, <span class="keywordtype">string</span> delay)
<a name="l00784"></a>00784             {
<a name="l00785"></a>00785                 SetStep(StepNamed);
<a name="l00786"></a>00786                 Name = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(name);
<a name="l00787"></a>00787                 Images = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(images);
<a name="l00788"></a>00788                 Delay = <a class="code" href="namespace_bx_util_global.html#a9d45cf5f144f0aaa40fa169feb915ea1" title="스트링을 정수로 변환">BxUtilGlobal::AtoI</a>(delay);
<a name="l00789"></a>00789             }
<a name="l00790"></a>00790         <span class="keyword">public</span>:
<a name="l00791"></a>00791             <span class="keyword">virtual</span> <span class="keywordtype">void</span> Linking(<span class="keyword">const</span> <a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map)
<a name="l00792"></a>00792             {
<a name="l00793"></a>00793                 SetStep(StepLinked);
<a name="l00794"></a>00794                 <a class="code" href="class_bx_var.html">BxVar&lt;BxString&gt;</a> ImageNames;
<a name="l00795"></a>00795                 <a class="code" href="class_bx_string.html#a79578e9b83b5373ebcef438bba4c99a9" title="스트링 나누기">BxString::ParseDivision</a>(Images, ImageNames);
<a name="l00796"></a>00796                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업중 유효한 엘리먼트가 하나도 없습니다&gt;&quot;</span>, ImageNames.Length());
<a name="l00797"></a>00797                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; ImageNames.Length(); ++i)
<a name="l00798"></a>00798                 {
<a name="l00799"></a>00799                     BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업에 실패했습니다&gt;&quot;</span>, Map.Access(ImageNames[i]) &amp;&amp; *Map.Access(ImageNames[i]));
<a name="l00800"></a>00800                     BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업중 타입이 일치하지 않습니다&gt;&quot;</span>, (*Map.Access(ImageNames[i]))-&gt;GetType() == TypeImage);
<a name="l00801"></a>00801                     ImageValues[i] = *Map.Access(ImageNames[i]);
<a name="l00802"></a>00802                 }
<a name="l00803"></a>00803             }
<a name="l00804"></a>00804         };
<a name="l00805"></a>00805         <span class="keyword">class </span>Font : <span class="keyword">public</span> Element
<a name="l00806"></a>00806         {
<a name="l00807"></a>00807             <span class="keywordtype">string</span> Name;
<a name="l00808"></a>00808             <span class="keywordtype">int</span> Size;
<a name="l00809"></a>00809             <span class="keywordtype">string</span> Url;
<a name="l00810"></a>00810         <span class="keyword">public</span>:
<a name="l00811"></a>00811             <span class="keywordtype">int</span> FileSize;
<a name="l00812"></a>00812             <span class="keywordtype">string</span> FilePath;
<a name="l00813"></a>00813             id_font CacheFont;
<a name="l00814"></a>00814         <span class="keyword">public</span>:
<a name="l00815"></a>00815             Font() : Name(null), Size(0), Url(null), FileSize(0), FilePath(null), CacheFont(null) {Type = TypeFont;}
<a name="l00816"></a>00816             <span class="keyword">virtual</span> ~Font()
<a name="l00817"></a>00817             {
<a name="l00818"></a>00818                 BxFree(Name);
<a name="l00819"></a>00819                 BxFree(Url);
<a name="l00820"></a>00820                 BxFree(FilePath);
<a name="l00821"></a>00821                 <a class="code" href="namespace_bx_core_1_1_font.html#a774eba3b56f296434e719f06842743b1" title="폰트닫기">BxCore::Font::Close</a>(CacheFont);
<a name="l00822"></a>00822             }
<a name="l00823"></a>00823         <span class="keyword">public</span>:
<a name="l00824"></a>00824             <span class="keywordtype">void</span> SetAttb(<span class="keywordtype">string</span> name, <span class="keywordtype">string</span> <a class="code" href="structsize.html" title="size구조체 : w, h">size</a>, <span class="keywordtype">string</span> url)
<a name="l00825"></a>00825             {
<a name="l00826"></a>00826                 SetStep(StepNamed);
<a name="l00827"></a>00827                 Name = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(name);
<a name="l00828"></a>00828                 Size = <a class="code" href="namespace_bx_util_global.html#a9d45cf5f144f0aaa40fa169feb915ea1" title="스트링을 정수로 변환">BxUtilGlobal::AtoI</a>(size);
<a name="l00829"></a>00829                 Url = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(url);
<a name="l00830"></a>00830             }
<a name="l00831"></a>00831             <span class="keyword">inline</span> id_font GetCacheFont() {<span class="keywordflow">return</span> CacheFont;}
<a name="l00832"></a>00832         <span class="keyword">public</span>:
<a name="l00833"></a>00833             <span class="keyword">virtual</span> <span class="keywordtype">bool</span> IsValidFill() {<span class="keywordflow">return</span> <span class="keyword">false</span>;}
<a name="l00834"></a>00834             <span class="keyword">virtual</span> <span class="keywordtype">void</span> PreProcessing(<a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>* Map, <a class="code" href="class_bx_var.html" title="가변배열 제공">BxVar&lt;Element&gt;</a>* Elements)
<a name="l00835"></a>00835             {
<a name="l00836"></a>00836                 SetStep(StepPreProcessed);
<a name="l00837"></a>00837                 <a class="code" href="class_bx_web_content.html" title="HTTP기반 쿼리송수신, 파일다운로드">BxWebContent</a> Content;
<a name="l00838"></a>00838                 <span class="keywordflow">if</span>(DownloadCache(Url, Content, FileSize, FilePath, <span class="keyword">false</span>))
<a name="l00839"></a>00839                     CacheFont = <a class="code" href="namespace_bx_core_1_1_font.html#ab5c096cde2aaab721067ff0b1e21783f" title="폰트열기(파일)">BxCore::Font::Open</a>(<a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a>(<a class="code" href="class_bx_web_content.html#a8ae29f0628682e1cfb7f6f667a895312" title="캐시폴더이름 받기">BxWebContent::GetCachePath</a>()) + <span class="stringliteral">&quot;/&quot;</span> + FilePath, Size);
<a name="l00840"></a>00840             }
<a name="l00841"></a>00841         };
<a name="l00842"></a>00842         <span class="keyword">class </span>Text : <span class="keyword">public</span> Element
<a name="l00843"></a>00843         {
<a name="l00844"></a>00844             <span class="keywordtype">string</span> Name;
<a name="l00845"></a>00845             <span class="keywordtype">string</span> Format;
<a name="l00846"></a>00846             <span class="keywordtype">string</span> Font;
<a name="l00847"></a>00847             <span class="keywordtype">string</span> Color;
<a name="l00848"></a>00848             <span class="keywordtype">string</span> Vector;
<a name="l00849"></a>00849             <span class="keywordtype">string</span> Line;
<a name="l00850"></a>00850         <span class="keyword">protected</span>:
<a name="l00851"></a>00851             <span class="keywordtype">string</span> FormatGen;
<a name="l00852"></a>00852         <span class="keyword">public</span>:
<a name="l00853"></a>00853             Content::Font* _ref_ FontValue;
<a name="l00854"></a>00854             Content::Color* _ref_ ColorValue;
<a name="l00855"></a>00855             ReserveCode VectorValue;
<a name="l00856"></a>00856             ReserveCode LineValue;
<a name="l00857"></a>00857         <span class="keyword">public</span>:
<a name="l00858"></a>00858             Text() : Name(null), Format(null), Font(null), Color(null), Vector(null), Line(null), FormatGen(null),
<a name="l00859"></a>00859                 FontValue(null), ColorValue(null), VectorValue(CodeNull) {Type = TypeText;}
<a name="l00860"></a>00860             <span class="keyword">virtual</span> ~Text()
<a name="l00861"></a>00861             {
<a name="l00862"></a>00862                 BxFree(Name);
<a name="l00863"></a>00863                 BxFree(Format);
<a name="l00864"></a>00864                 BxFree(Font);
<a name="l00865"></a>00865                 BxFree(Color);
<a name="l00866"></a>00866                 BxFree(Vector);
<a name="l00867"></a>00867                 BxFree(Line);
<a name="l00868"></a>00868                 BxFree(FormatGen);
<a name="l00869"></a>00869             }
<a name="l00870"></a>00870         <span class="keyword">public</span>:
<a name="l00871"></a>00871             <span class="keywordtype">void</span> SetAttb(<span class="keywordtype">string</span> name, <span class="keywordtype">string</span> format, <span class="keywordtype">string</span> font, <span class="keywordtype">string</span> color, <span class="keywordtype">string</span> vector, <span class="keywordtype">string</span> line)
<a name="l00872"></a>00872             {
<a name="l00873"></a>00873                 SetStep(StepNamed);
<a name="l00874"></a>00874                 Name = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(name);
<a name="l00875"></a>00875                 Format = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(format);
<a name="l00876"></a>00876                 Font = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(font);
<a name="l00877"></a>00877                 Color = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(color);
<a name="l00878"></a>00878                 Vector = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(<a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a>(<span class="stringliteral">&quot;vector.&quot;</span>) + vector);
<a name="l00879"></a>00879                 Line = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(<a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a>(<span class="stringliteral">&quot;line.&quot;</span>) + line);
<a name="l00880"></a>00880             }
<a name="l00881"></a>00881             <span class="keywordtype">void</span> AdjustFormatNoList(<a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>* Map, <a class="code" href="class_bx_var.html" title="가변배열 제공">BxVar&lt;Element&gt;</a>* Elements, ...)
<a name="l00882"></a>00882             {
<a name="l00883"></a>00883                 va_list List;
<a name="l00884"></a>00884                 va_start(List, Elements);
<a name="l00885"></a>00885                 AdjustFormat(<span class="keyword">false</span>, List, Map, Elements);
<a name="l00886"></a>00886                 va_end(List);
<a name="l00887"></a>00887             }
<a name="l00888"></a>00888             <span class="keywordtype">void</span> AdjustFormat(<span class="keywordtype">bool</span> dosprint, va_list list, <a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>* Map, <a class="code" href="class_bx_var.html" title="가변배열 제공">BxVar&lt;Element&gt;</a>* Elements)
<a name="l00889"></a>00889             {
<a name="l00890"></a>00890                 BxFree(FormatGen);
<a name="l00891"></a>00891                 <span class="keywordflow">if</span>(dosprint)
<a name="l00892"></a>00892                 {
<a name="l00893"></a>00893                     <span class="keyword">const</span> <span class="keywordtype">int</span> FormatGenLen = <a class="code" href="namespace_bx_core_1_1_util.html#ac70cec443af515775e1715fb098d4ebd" title="스트링에 va_list식 스트링기록">BxCore::Util::VsnPrintf</a>(null, 0, Format, list);
<a name="l00894"></a>00894                     BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;FormatGen의 예상길이를 얻는데 실패하였습니다&gt;&quot;</span>, 0 &lt;= FormatGenLen);
<a name="l00895"></a>00895                     FormatGen = (string) BxAlloc(FormatGenLen + 1);
<a name="l00896"></a>00896                     <a class="code" href="namespace_bx_core_1_1_util.html#ac70cec443af515775e1715fb098d4ebd" title="스트링에 va_list식 스트링기록">BxCore::Util::VsnPrintf</a>((string_rw) FormatGen, FormatGenLen + 1, Format, list);
<a name="l00897"></a>00897                 }
<a name="l00898"></a>00898                 <span class="keywordflow">else</span> FormatGen = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(Format);
<a name="l00899"></a>00899                 <span class="keywordflow">if</span>(Map)
<a name="l00900"></a>00900                 {
<a name="l00901"></a>00901                     <span class="keyword">const</span> <a class="code" href="structsize.html" title="size구조체 : w, h">size</a> TextSize = (FontValue-&gt;GetCacheFont())? <a class="code" href="namespace_bx_core_1_1_font.html#a3e241c20e4073cadd5e3e25add4293e3" title="사이즈 얻기">BxCore::Font::GetSize</a>(FontValue-&gt;GetCacheFont(), FormatGen) : WH(0, 0);
<a name="l00902"></a>00902                     <span class="comment">// 가로길이 추가등록</span>
<a name="l00903"></a>00903                     <a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a> WidthName(<span class="stringliteral">&quot;%s.width&quot;</span>, null, (<span class="keywordtype">string</span>) Name);
<a name="l00904"></a>00904                     <span class="keywordflow">if</span>(Map-&gt;Access(WidthName)) (*Map-&gt;Access(WidthName))-&gt;SetValue(TextSize.w);
<a name="l00905"></a>00905                     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(Elements)
<a name="l00906"></a>00906                     {
<a name="l00907"></a>00907                         Element* NewData = BxNew_Param(Element, TextSize.w);
<a name="l00908"></a>00908                         Elements-&gt;Insert(LAST, (*Map)[WidthName] = NewData);
<a name="l00909"></a>00909                         NewData-&gt;SetStep(StepNamed);
<a name="l00910"></a>00910                         NewData-&gt;PreProcessing(null, null);
<a name="l00911"></a>00911                     }
<a name="l00912"></a>00912                     <span class="comment">// 세로길이 추가등록</span>
<a name="l00913"></a>00913                     <a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a> HeightName(<span class="stringliteral">&quot;%s.height&quot;</span>, null, (<span class="keywordtype">string</span>) Name);
<a name="l00914"></a>00914                     <span class="keywordflow">if</span>(Map-&gt;Access(HeightName)) (*Map-&gt;Access(HeightName))-&gt;SetValue(TextSize.h);
<a name="l00915"></a>00915                     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(Elements)
<a name="l00916"></a>00916                     {
<a name="l00917"></a>00917                         Element* NewData = BxNew_Param(Element, TextSize.h);
<a name="l00918"></a>00918                         Elements-&gt;Insert(LAST, (*Map)[HeightName] = NewData);
<a name="l00919"></a>00919                         NewData-&gt;SetStep(StepNamed);
<a name="l00920"></a>00920                         NewData-&gt;PreProcessing(null, null);
<a name="l00921"></a>00921                     }
<a name="l00922"></a>00922                 }
<a name="l00923"></a>00923             }
<a name="l00924"></a>00924         <span class="keyword">public</span>:
<a name="l00925"></a>00925             <span class="keyword">virtual</span> <span class="keywordtype">void</span> Processing(<a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>* Map, <a class="code" href="class_bx_var.html" title="가변배열 제공">BxVar&lt;Element&gt;</a>* Elements)
<a name="l00926"></a>00926             {
<a name="l00927"></a>00927                 SetStep(StepProcessed);
<a name="l00928"></a>00928                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업에 실패했습니다&gt;&quot;</span>, Map-&gt;Access(Font) &amp;&amp; *Map-&gt;Access(Font));
<a name="l00929"></a>00929                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업중 타입이 일치하지 않습니다&gt;&quot;</span>, (*Map-&gt;Access(Font))-&gt;GetType() == TypeFont);
<a name="l00930"></a>00930                 FontValue = (Content::Font*) *Map-&gt;Access(Font);
<a name="l00931"></a>00931                 AdjustFormatNoList(Map, Elements);
<a name="l00932"></a>00932             }
<a name="l00933"></a>00933             <span class="keyword">virtual</span> <span class="keywordtype">void</span> Linking(<span class="keyword">const</span> <a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map)
<a name="l00934"></a>00934             {
<a name="l00935"></a>00935                 SetStep(StepLinked);
<a name="l00936"></a>00936                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업에 실패했습니다&gt;&quot;</span>, Map.Access(Color) &amp;&amp; *Map.Access(Color));
<a name="l00937"></a>00937                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업중 타입이 일치하지 않습니다&gt;&quot;</span>, (*Map.Access(Color))-&gt;GetType() == TypeColor);
<a name="l00938"></a>00938                 ColorValue = (Content::Color*) *Map.Access(Color);
<a name="l00939"></a>00939                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업에 실패했습니다&gt;&quot;</span>, Map.Access(Vector) &amp;&amp; *Map.Access(Vector));
<a name="l00940"></a>00940                 VectorValue = (ReserveCode) (*Map.Access(Vector))-&gt;GetValue();
<a name="l00941"></a>00941                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업에 실패했습니다&gt;&quot;</span>, Map.Access(Line) &amp;&amp; *Map.Access(Line));
<a name="l00942"></a>00942                 LineValue = (ReserveCode) (*Map.Access(Line))-&gt;GetValue();
<a name="l00943"></a>00943             }
<a name="l00944"></a>00944             <span class="keyword">virtual</span> <span class="keywordtype">void</span> Filling(<a class="code" href="class_bx_draw.html" title="OpenGL/SW랜더링기반 그리기도구">BxDraw</a>&amp; Draw, <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> Rect)
<a name="l00945"></a>00945             {
<a name="l00946"></a>00946                 <span class="keyword">const</span> <span class="keywordtype">int</span> RectWidth = Rect.r - Rect.l;
<a name="l00947"></a>00947                 <span class="keyword">const</span> <span class="keywordtype">int</span> RectHeight = Rect.b - Rect.t;
<a name="l00948"></a>00948                 <span class="keywordflow">if</span>(0 &lt; RectWidth &amp;&amp; 0 &lt; RectHeight &amp;&amp; FontValue-&gt;GetCacheFont() &amp;&amp; Draw.<a class="code" href="class_bx_draw.html#af11467c2017eb776b2a89e9144e9e413" title="클리핑고려 스타일옵션 스택추가(if안에서 사용권장)">AddStyleByIf</a>(CLIP(Rect)))
<a name="l00949"></a>00949                 {
<a name="l00950"></a>00950                     <span class="keywordflow">switch</span>(VectorValue)
<a name="l00951"></a>00951                     {
<a name="l00952"></a>00952                     <span class="keywordflow">default</span>:
<a name="l00953"></a>00953                     <span class="keywordflow">case</span> CodeNumpad1: <a class="code" href="namespace_bx_core_1_1_font.html#a239100dc09bcb22c8207f5a36fc0c775" title="정렬방식 설정">BxCore::Font::SetSort</a>(fontsort_pad1); <span class="keywordflow">break</span>;
<a name="l00954"></a>00954                     <span class="keywordflow">case</span> CodeNumpad2: <a class="code" href="namespace_bx_core_1_1_font.html#a239100dc09bcb22c8207f5a36fc0c775" title="정렬방식 설정">BxCore::Font::SetSort</a>(fontsort_pad2); <span class="keywordflow">break</span>;
<a name="l00955"></a>00955                     <span class="keywordflow">case</span> CodeNumpad3: <a class="code" href="namespace_bx_core_1_1_font.html#a239100dc09bcb22c8207f5a36fc0c775" title="정렬방식 설정">BxCore::Font::SetSort</a>(fontsort_pad3); <span class="keywordflow">break</span>;
<a name="l00956"></a>00956                     <span class="keywordflow">case</span> CodeNumpad4: <a class="code" href="namespace_bx_core_1_1_font.html#a239100dc09bcb22c8207f5a36fc0c775" title="정렬방식 설정">BxCore::Font::SetSort</a>(fontsort_pad4); <span class="keywordflow">break</span>;
<a name="l00957"></a>00957                     <span class="keywordflow">case</span> CodeNumpad5: <a class="code" href="namespace_bx_core_1_1_font.html#a239100dc09bcb22c8207f5a36fc0c775" title="정렬방식 설정">BxCore::Font::SetSort</a>(fontsort_pad5); <span class="keywordflow">break</span>;
<a name="l00958"></a>00958                     <span class="keywordflow">case</span> CodeNumpad6: <a class="code" href="namespace_bx_core_1_1_font.html#a239100dc09bcb22c8207f5a36fc0c775" title="정렬방식 설정">BxCore::Font::SetSort</a>(fontsort_pad6); <span class="keywordflow">break</span>;
<a name="l00959"></a>00959                     <span class="keywordflow">case</span> CodeNumpad7: <a class="code" href="namespace_bx_core_1_1_font.html#a239100dc09bcb22c8207f5a36fc0c775" title="정렬방식 설정">BxCore::Font::SetSort</a>(fontsort_pad7); <span class="keywordflow">break</span>;
<a name="l00960"></a>00960                     <span class="keywordflow">case</span> CodeNumpad8: <a class="code" href="namespace_bx_core_1_1_font.html#a239100dc09bcb22c8207f5a36fc0c775" title="정렬방식 설정">BxCore::Font::SetSort</a>(fontsort_pad8); <span class="keywordflow">break</span>;
<a name="l00961"></a>00961                     <span class="keywordflow">case</span> CodeNumpad9: <a class="code" href="namespace_bx_core_1_1_font.html#a239100dc09bcb22c8207f5a36fc0c775" title="정렬방식 설정">BxCore::Font::SetSort</a>(fontsort_pad9); <span class="keywordflow">break</span>;
<a name="l00962"></a>00962                     }
<a name="l00963"></a>00963                     <span class="keywordflow">if</span>(LineValue == CodeSingle)
<a name="l00964"></a>00964                     {
<a name="l00965"></a>00965                         <a class="code" href="structpoint.html" title="point구조체 : x, y">point</a> xy = {0,};
<a name="l00966"></a>00966                         <span class="keywordflow">switch</span>(VectorValue)
<a name="l00967"></a>00967                         {
<a name="l00968"></a>00968                         <span class="keywordflow">default</span>:
<a name="l00969"></a>00969                         <span class="keywordflow">case</span> CodeNumpad1: xy = BxDrawGlobal::XY(0, RectHeight - size::max); <span class="keywordflow">break</span>;
<a name="l00970"></a>00970                         <span class="keywordflow">case</span> CodeNumpad2: xy = BxDrawGlobal::XY(RectWidth / 2 - size::half, RectHeight - size::max); <span class="keywordflow">break</span>;
<a name="l00971"></a>00971                         <span class="keywordflow">case</span> CodeNumpad3: xy = BxDrawGlobal::XY(RectWidth - size::max, RectHeight - size::max); <span class="keywordflow">break</span>;
<a name="l00972"></a>00972                         <span class="keywordflow">case</span> CodeNumpad4: xy = BxDrawGlobal::XY(0, RectHeight / 2 - size::half); <span class="keywordflow">break</span>;
<a name="l00973"></a>00973                         <span class="keywordflow">case</span> CodeNumpad5: xy = BxDrawGlobal::XY(RectWidth / 2 - size::half, RectHeight / 2 - size::half); <span class="keywordflow">break</span>;
<a name="l00974"></a>00974                         <span class="keywordflow">case</span> CodeNumpad6: xy = BxDrawGlobal::XY(RectWidth - size::max, RectHeight / 2 - size::half); <span class="keywordflow">break</span>;
<a name="l00975"></a>00975                         <span class="keywordflow">case</span> CodeNumpad7: xy = BxDrawGlobal::XY(0, 0); <span class="keywordflow">break</span>;
<a name="l00976"></a>00976                         <span class="keywordflow">case</span> CodeNumpad8: xy = BxDrawGlobal::XY(RectWidth / 2 - size::half, 0); <span class="keywordflow">break</span>;
<a name="l00977"></a>00977                         <span class="keywordflow">case</span> CodeNumpad9: xy = BxDrawGlobal::XY(RectWidth - size::max, 0); <span class="keywordflow">break</span>;
<a name="l00978"></a>00978                         }
<a name="l00979"></a>00979                         <a class="code" href="namespace_bx_core_1_1_font.html#a08159673a1a3269082f9a3a1bc90eb28" title="스트링 출력">BxCore::Font::Draw</a>(FontValue-&gt;GetCacheFont(), FormatGen,
<a name="l00980"></a>00980                             BxDrawGlobal::XY(Draw.<a class="code" href="class_bx_draw.html#ad633ce6baf25d6c93dde6669d4093a3e" title="현재 X축 기준좌표얻기">TranslateX</a>() + xy.x, Draw.<a class="code" href="class_bx_draw.html#a21597dea9cb25b209963d30307b31baf" title="현재 Y축 기준좌표얻기">TranslateY</a>() + xy.y), size::full(),
<a name="l00981"></a>00981                             ColorValue-&gt;GetArgb() &amp; 0x00FFFFFF, ColorValue-&gt;GetArgb() &gt;&gt; 24);
<a name="l00982"></a>00982                     }
<a name="l00983"></a>00983                     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(LineValue == CodeMulti)
<a name="l00984"></a>00984                         <a class="code" href="namespace_bx_core_1_1_font.html#a08159673a1a3269082f9a3a1bc90eb28" title="스트링 출력">BxCore::Font::Draw</a>(FontValue-&gt;GetCacheFont(), FormatGen,
<a name="l00985"></a>00985                             BxDrawGlobal::XY(Draw.<a class="code" href="class_bx_draw.html#ad633ce6baf25d6c93dde6669d4093a3e" title="현재 X축 기준좌표얻기">TranslateX</a>(), Draw.<a class="code" href="class_bx_draw.html#a21597dea9cb25b209963d30307b31baf" title="현재 Y축 기준좌표얻기">TranslateY</a>()), BxDrawGlobal::WH(RectWidth, RectHeight),
<a name="l00986"></a>00986                             ColorValue-&gt;GetArgb() &amp; 0x00FFFFFF, ColorValue-&gt;GetArgb() &gt;&gt; 24);
<a name="l00987"></a>00987                     Draw.<a class="code" href="class_bx_draw.html#a0f0ad44b174221300cc2ac99afbc5325" title="스타일옵션 스택해제">SubStyle</a>();
<a name="l00988"></a>00988                 }
<a name="l00989"></a>00989             }
<a name="l00990"></a>00990         };
<a name="l00991"></a>00991         <span class="keyword">class </span>Button : <span class="keyword">public</span> Element
<a name="l00992"></a>00992         {
<a name="l00993"></a>00993             <span class="keywordtype">string</span> Name;
<a name="l00994"></a>00994             <span class="keywordtype">string</span> Images;
<a name="l00995"></a>00995             <span class="keywordtype">string</span> Edges;
<a name="l00996"></a>00996             <span class="keywordtype">string</span> Event;
<a name="l00997"></a>00997             <span class="keywordtype">string</span> Link;
<a name="l00998"></a>00998         <span class="keyword">protected</span>:
<a name="l00999"></a>00999             <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> EventAreaGen;
<a name="l01000"></a>01000             <span class="keywordtype">bool</span> IsClickedGen;
<a name="l01001"></a>01001         <span class="keyword">public</span>:
<a name="l01002"></a>01002             <a class="code" href="class_bx_var.html" title="가변배열 제공">BxVar&lt;Element*&gt;</a> _ref_ ImageValues;
<a name="l01003"></a>01003             <a class="code" href="class_bx_var.html" title="가변배열 제공">BxVar&lt;Element*&gt;</a> _ref_ EdgeValues;
<a name="l01004"></a>01004         <span class="keyword">public</span>:
<a name="l01005"></a>01005             Button() : Name(null), Images(null), Edges(null), Event(null), Link(null), EventAreaGen(rect::zero()), IsClickedGen(<span class="keyword">false</span>)
<a name="l01006"></a>01006             {Type = TypeButton;}
<a name="l01007"></a>01007             <span class="keyword">virtual</span> ~Button()
<a name="l01008"></a>01008             {
<a name="l01009"></a>01009                 BxFree(Name);
<a name="l01010"></a>01010                 BxFree(Images);
<a name="l01011"></a>01011                 BxFree(Edges);
<a name="l01012"></a>01012                 BxFree(Event);
<a name="l01013"></a>01013                 BxFree(Link);
<a name="l01014"></a>01014             }
<a name="l01015"></a>01015         <span class="keyword">public</span>:
<a name="l01016"></a>01016             <span class="keywordtype">void</span> SetAttb(<span class="keywordtype">string</span> name, <span class="keywordtype">string</span> images, <span class="keywordtype">string</span> edges, <span class="keywordtype">string</span> event, <span class="keywordtype">string</span> link)
<a name="l01017"></a>01017             {
<a name="l01018"></a>01018                 SetStep(StepNamed);
<a name="l01019"></a>01019                 Name = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(name);
<a name="l01020"></a>01020                 Images = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(images);
<a name="l01021"></a>01021                 Edges = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(edges);
<a name="l01022"></a>01022                 Event = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(event);
<a name="l01023"></a>01023                 Link = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(link);
<a name="l01024"></a>01024             }
<a name="l01025"></a>01025         <span class="keyword">public</span>:
<a name="l01026"></a>01026             <span class="keyword">virtual</span> <span class="keywordtype">void</span> Linking(<span class="keyword">const</span> <a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map)
<a name="l01027"></a>01027             {
<a name="l01028"></a>01028                 SetStep(StepLinked);
<a name="l01029"></a>01029                 <a class="code" href="class_bx_var.html">BxVar&lt;BxString&gt;</a> ImageNames;
<a name="l01030"></a>01030                 <a class="code" href="class_bx_string.html#a79578e9b83b5373ebcef438bba4c99a9" title="스트링 나누기">BxString::ParseDivision</a>(Images, ImageNames);
<a name="l01031"></a>01031                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업중 유효한 엘리먼트가 하나도 없습니다&gt;&quot;</span>, ImageNames.Length());
<a name="l01032"></a>01032                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; ImageNames.Length(); ++i)
<a name="l01033"></a>01033                 {
<a name="l01034"></a>01034                     BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업에 실패했습니다&gt;&quot;</span>, Map.Access(ImageNames[i]) &amp;&amp; *Map.Access(ImageNames[i]));
<a name="l01035"></a>01035                     BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업중 타입이 일치하지 않습니다&gt;&quot;</span>, (*Map.Access(ImageNames[i]))-&gt;GetType() == TypeImage);
<a name="l01036"></a>01036                     ImageValues[i] = *Map.Access(ImageNames[i]);
<a name="l01037"></a>01037                 }
<a name="l01038"></a>01038                 <a class="code" href="class_bx_var.html">BxVar&lt;BxString&gt;</a> EdgeNames;
<a name="l01039"></a>01039                 <a class="code" href="class_bx_string.html#a79578e9b83b5373ebcef438bba4c99a9" title="스트링 나누기">BxString::ParseDivision</a>(Edges, EdgeNames);
<a name="l01040"></a>01040                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; EdgeNames.Length(); ++i)
<a name="l01041"></a>01041                 {
<a name="l01042"></a>01042                     BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업에 실패했습니다&gt;&quot;</span>, Map.Access(EdgeNames[i]) &amp;&amp; *Map.Access(EdgeNames[i]));
<a name="l01043"></a>01043                     BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업중 타입이 일치하지 않습니다&gt;&quot;</span>, (*Map.Access(EdgeNames[i]))-&gt;GetType() == TypeEdge);
<a name="l01044"></a>01044                     EdgeValues[i] = *Map.Access(EdgeNames[i]);
<a name="l01045"></a>01045                 }
<a name="l01046"></a>01046             }
<a name="l01047"></a>01047             <span class="keyword">virtual</span> <span class="keywordtype">void</span> Filling(<a class="code" href="class_bx_draw.html" title="OpenGL/SW랜더링기반 그리기도구">BxDraw</a>&amp; Draw, <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> Rect)
<a name="l01048"></a>01048             {
<a name="l01049"></a>01049                 <span class="keywordflow">if</span>(2 &lt;= ImageValues.Length())
<a name="l01050"></a>01050                 {
<a name="l01051"></a>01051                     <span class="keywordtype">int</span> ImageID = (IsClickedGen)? 1 : 0;
<a name="l01052"></a>01052                     ImageValues[ImageID]-&gt;Filling(Draw, Rect);
<a name="l01053"></a>01053                     <a class="code" href="structsize.html" title="size구조체 : w, h">size</a> OneSize = size::zero();
<a name="l01054"></a>01054                     <span class="keywordflow">if</span>(ImageValues[ImageID]-&gt;GetType() == TypeImage)
<a name="l01055"></a>01055                     {
<a name="l01056"></a>01056                         Image* OneImage = (Image*) ImageValues[ImageID];
<a name="l01057"></a>01057                         OneSize.w = OneImage-&gt;CacheImage.Width();
<a name="l01058"></a>01058                         OneSize.h = OneImage-&gt;CacheImage.Height();
<a name="l01059"></a>01059                     }
<a name="l01060"></a>01060                     Rect.l = <a class="code" href="namespace_bx_util_global.html#a52580a7f5dbd7722b56eab2e3167292f" title="최대값 구하기">BxUtilGlobal::Max</a>(Rect.l + Draw.<a class="code" href="class_bx_draw.html#ad633ce6baf25d6c93dde6669d4093a3e" title="현재 X축 기준좌표얻기">TranslateX</a>(), BxDrawGlobal::_DrawOption::CurClipRect().l);
<a name="l01061"></a>01061                     Rect.t = <a class="code" href="namespace_bx_util_global.html#a52580a7f5dbd7722b56eab2e3167292f" title="최대값 구하기">BxUtilGlobal::Max</a>(Rect.t + Draw.<a class="code" href="class_bx_draw.html#a21597dea9cb25b209963d30307b31baf" title="현재 Y축 기준좌표얻기">TranslateY</a>(), BxDrawGlobal::_DrawOption::CurClipRect().t);
<a name="l01062"></a>01062                     Rect.r = <a class="code" href="namespace_bx_util_global.html#af6b6936a90b9f791ce6f2b2b4d15b15e" title="최소값 구하기">BxUtilGlobal::Min</a>(Rect.r + Draw.<a class="code" href="class_bx_draw.html#ad633ce6baf25d6c93dde6669d4093a3e" title="현재 X축 기준좌표얻기">TranslateX</a>(), BxDrawGlobal::_DrawOption::CurClipRect().r);
<a name="l01063"></a>01063                     Rect.b = <a class="code" href="namespace_bx_util_global.html#af6b6936a90b9f791ce6f2b2b4d15b15e" title="최소값 구하기">BxUtilGlobal::Min</a>(Rect.b + Draw.<a class="code" href="class_bx_draw.html#a21597dea9cb25b209963d30307b31baf" title="현재 Y축 기준좌표얻기">TranslateY</a>(), BxDrawGlobal::_DrawOption::CurClipRect().b);
<a name="l01064"></a>01064                     EventAreaGen.r = (EventAreaGen.l = Rect.l) + <a class="code" href="namespace_bx_util_global.html#af6b6936a90b9f791ce6f2b2b4d15b15e" title="최소값 구하기">BxUtilGlobal::Min</a>(Rect.r - Rect.l, OneSize.w);
<a name="l01065"></a>01065                     EventAreaGen.b = (EventAreaGen.t = Rect.t) + <a class="code" href="namespace_bx_util_global.html#af6b6936a90b9f791ce6f2b2b4d15b15e" title="최소값 구하기">BxUtilGlobal::Min</a>(Rect.b - Rect.t, OneSize.h);
<a name="l01066"></a>01066                 }
<a name="l01067"></a>01067             }
<a name="l01068"></a>01068             <span class="keyword">virtual</span> <span class="keywordtype">bool</span> OnEvent(<span class="keyword">const</span> <a class="code" href="structsysevent.html" title="OnEvent()의 이벤트파라미터">sysevent</a>&amp; SysEvent)
<a name="l01069"></a>01069             {
<a name="l01070"></a>01070                 <span class="keywordflow">if</span>(SysEvent.type != syseventtype_touch)
<a name="l01071"></a>01071                     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01072"></a>01072                 <span class="keywordflow">if</span>(SysEvent.touch.type == systouchtype_down)
<a name="l01073"></a>01073                 {
<a name="l01074"></a>01074                     <span class="keywordflow">if</span>(SysEvent.touch.x &lt; EventAreaGen.l || SysEvent.touch.y &lt; EventAreaGen.t ||
<a name="l01075"></a>01075                         EventAreaGen.r &lt;= SysEvent.touch.x || EventAreaGen.b &lt;= SysEvent.touch.y)
<a name="l01076"></a>01076                         IsClickedGen = <span class="keyword">false</span>;
<a name="l01077"></a>01077                     <span class="keywordflow">else</span> IsClickedGen = <span class="keyword">true</span>;
<a name="l01078"></a>01078                 }
<a name="l01079"></a>01079                 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(SysEvent.touch.type != systouchtype_move)
<a name="l01080"></a>01080                 {
<a name="l01081"></a>01081                     <span class="keywordflow">if</span>(SysEvent.touch.type == systouchtype_up &amp;&amp; IsClickedGen &amp;&amp; BxSceneObject::Callback() &amp;&amp;
<a name="l01082"></a>01082                         !(SysEvent.touch.x &lt; EventAreaGen.l || SysEvent.touch.y &lt; EventAreaGen.t ||
<a name="l01083"></a>01083                         EventAreaGen.r &lt;= SysEvent.touch.x || EventAreaGen.b &lt;= SysEvent.touch.y))
<a name="l01084"></a>01084                         BxSceneObject::Callback()(<span class="keyword">true</span>, Event, (<span class="keywordtype">void</span>*) Link);
<a name="l01085"></a>01085                     IsClickedGen = <span class="keyword">false</span>;
<a name="l01086"></a>01086                 }
<a name="l01087"></a>01087                 <span class="keywordflow">return</span> IsClickedGen;
<a name="l01088"></a>01088             }
<a name="l01089"></a>01089         };
<a name="l01090"></a>01090         <span class="keyword">class </span>EditBox : <span class="keyword">public</span> Element
<a name="l01091"></a>01091         {
<a name="l01092"></a>01092             <span class="keywordtype">string</span> Name;
<a name="l01093"></a>01093             <span class="keywordtype">string</span> Text;
<a name="l01094"></a>01094             <span class="keywordtype">string</span> Colors;
<a name="l01095"></a>01095         <span class="keyword">public</span>:
<a name="l01096"></a>01096             Element* _ref_ TextValue;
<a name="l01097"></a>01097             <a class="code" href="class_bx_var.html" title="가변배열 제공">BxVar&lt;Element*&gt;</a> _ref_ ColorValues;
<a name="l01098"></a>01098         <span class="keyword">public</span>:
<a name="l01099"></a>01099             EditBox() : Name(null), Text(null), Colors(null), TextValue(null) {Type = TypeEditBox;}
<a name="l01100"></a>01100             <span class="keyword">virtual</span> ~EditBox()
<a name="l01101"></a>01101             {
<a name="l01102"></a>01102                 BxFree(Name);
<a name="l01103"></a>01103                 BxFree(Text);
<a name="l01104"></a>01104                 BxFree(Colors);
<a name="l01105"></a>01105             }
<a name="l01106"></a>01106         <span class="keyword">public</span>:
<a name="l01107"></a>01107             <span class="keywordtype">void</span> SetAttb(<span class="keywordtype">string</span> name, <span class="keywordtype">string</span> text, <span class="keywordtype">string</span> colors)
<a name="l01108"></a>01108             {
<a name="l01109"></a>01109                 SetStep(StepNamed);
<a name="l01110"></a>01110                 Name = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(name);
<a name="l01111"></a>01111                 Text = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(text);
<a name="l01112"></a>01112                 Colors = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(colors);
<a name="l01113"></a>01113             }
<a name="l01114"></a>01114         <span class="keyword">public</span>:
<a name="l01115"></a>01115             <span class="keyword">virtual</span> <span class="keywordtype">void</span> Linking(<span class="keyword">const</span> <a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map)
<a name="l01116"></a>01116             {
<a name="l01117"></a>01117                 SetStep(StepLinked);
<a name="l01118"></a>01118                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업에 실패했습니다&gt;&quot;</span>, Map.Access(Text) &amp;&amp; *Map.Access(Text));
<a name="l01119"></a>01119                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업중 타입이 일치하지 않습니다&gt;&quot;</span>, (*Map.Access(Text))-&gt;GetType() == TypeText);
<a name="l01120"></a>01120                 TextValue = *Map.Access(Text);
<a name="l01121"></a>01121                 <a class="code" href="class_bx_var.html">BxVar&lt;BxString&gt;</a> ColorNames;
<a name="l01122"></a>01122                 <a class="code" href="class_bx_string.html#a79578e9b83b5373ebcef438bba4c99a9" title="스트링 나누기">BxString::ParseDivision</a>(Colors, ColorNames);
<a name="l01123"></a>01123                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업중 유효한 엘리먼트가 하나도 없습니다&gt;&quot;</span>, ColorNames.Length());
<a name="l01124"></a>01124                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; ColorNames.Length(); ++i)
<a name="l01125"></a>01125                 {
<a name="l01126"></a>01126                     BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업에 실패했습니다&gt;&quot;</span>, Map.Access(ColorNames[i]) &amp;&amp; *Map.Access(ColorNames[i]));
<a name="l01127"></a>01127                     BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업중 타입이 일치하지 않습니다&gt;&quot;</span>, (*Map.Access(ColorNames[i]))-&gt;GetType() == TypeColor);
<a name="l01128"></a>01128                     ColorValues[i] = *Map.Access(ColorNames[i]);
<a name="l01129"></a>01129                 }
<a name="l01130"></a>01130             }
<a name="l01131"></a>01131         };
<a name="l01132"></a>01132 
<a name="l01133"></a>01133     <span class="keyword">public</span>:
<a name="l01134"></a>01134         Content() {}
<a name="l01135"></a>01135         <span class="keyword">virtual</span> ~Content()
<a name="l01136"></a>01136         {
<a name="l01137"></a>01137             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; Elements.Length(); ++i)
<a name="l01138"></a>01138             {
<a name="l01139"></a>01139                 Element* OldData = null;
<a name="l01140"></a>01140                 Elements.RemoveData(i, &amp;OldData);
<a name="l01141"></a>01141                 BxDelete(OldData);
<a name="l01142"></a>01142             }
<a name="l01143"></a>01143         }
<a name="l01144"></a>01144     <span class="keyword">public</span>:
<a name="l01145"></a>01145         <a class="code" href="class_bx_var.html" title="가변배열 제공">BxVar&lt;Element&gt;</a>* GetElements() {<span class="keywordflow">return</span> &amp;Elements;}
<a name="l01146"></a>01146     <span class="keyword">public</span>:
<a name="l01147"></a>01147         <span class="keywordtype">void</span> PreProcessing(<a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map)
<a name="l01148"></a>01148         {
<a name="l01149"></a>01149             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; Elements.Length(); ++i)
<a name="l01150"></a>01150                 Elements[i].PreProcessing(&amp;Map, &amp;Elements);
<a name="l01151"></a>01151         }
<a name="l01152"></a>01152         <span class="keywordtype">void</span> Processing(<a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map)
<a name="l01153"></a>01153         {
<a name="l01154"></a>01154             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; Elements.Length(); ++i)
<a name="l01155"></a>01155                 Elements[i].Processing(&amp;Map, &amp;Elements);
<a name="l01156"></a>01156         }
<a name="l01157"></a>01157         <span class="keywordtype">void</span> Linking(<span class="keyword">const</span> <a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map)
<a name="l01158"></a>01158         {
<a name="l01159"></a>01159             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; Elements.Length(); ++i)
<a name="l01160"></a>01160                 Elements[i].Linking(Map);
<a name="l01161"></a>01161         }
<a name="l01162"></a>01162         <span class="keywordtype">void</span> AddNull(<a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map, <span class="keywordtype">string</span> Name)
<a name="l01163"></a>01163         {
<a name="l01164"></a>01164             BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;중복된 컨텐트명입니다&gt;&quot;</span>, !Map.Access(Name));
<a name="l01165"></a>01165             Element* NewData = BxNew(Element);
<a name="l01166"></a>01166             Elements.Insert(LAST, Map[Name] = NewData);
<a name="l01167"></a>01167             NewData-&gt;SetStep(StepNamed);
<a name="l01168"></a>01168         }
<a name="l01169"></a>01169         <span class="keywordtype">void</span> AddValue(<a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map, <span class="keywordtype">string</span> Name, <span class="keywordtype">int</span> Value)
<a name="l01170"></a>01170         {
<a name="l01171"></a>01171             BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;중복된 컨텐트명입니다&gt;&quot;</span>, !Map.Access(Name));
<a name="l01172"></a>01172             Element* NewData = BxNew_Param(Element, Value);
<a name="l01173"></a>01173             Elements.Insert(LAST, Map[Name] = NewData);
<a name="l01174"></a>01174             NewData-&gt;SetStep(StepNamed);
<a name="l01175"></a>01175         }
<a name="l01176"></a>01176         <span class="keywordtype">void</span> AddColor(<a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map, <span class="keywordtype">string</span> Name, <span class="keywordtype">string</span> Argb)
<a name="l01177"></a>01177         {
<a name="l01178"></a>01178             BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;중복된 컨텐트명입니다&gt;&quot;</span>, !Map.Access(Name));
<a name="l01179"></a>01179             Color* NewData = BxNew(Color);
<a name="l01180"></a>01180             NewData-&gt;SetAttb(Name, Argb);
<a name="l01181"></a>01181             Elements.Insert(LAST, Map[Name] = NewData);
<a name="l01182"></a>01182         }
<a name="l01183"></a>01183         <span class="keywordtype">void</span> AddEdge(<a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map, <span class="keywordtype">string</span> Name, <span class="keywordtype">string</span> Colors)
<a name="l01184"></a>01184         {
<a name="l01185"></a>01185             BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;중복된 컨텐트명입니다&gt;&quot;</span>, !Map.Access(Name));
<a name="l01186"></a>01186             Edge* NewData = BxNew(Edge);
<a name="l01187"></a>01187             NewData-&gt;SetAttb(Name, Colors);
<a name="l01188"></a>01188             Elements.Insert(LAST, Map[Name] = NewData);
<a name="l01189"></a>01189         }
<a name="l01190"></a>01190         <span class="keywordtype">void</span> AddImage(<a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map, <span class="keywordtype">string</span> Name, <span class="keywordtype">string</span> Url)
<a name="l01191"></a>01191         {
<a name="l01192"></a>01192             BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;중복된 컨텐트명입니다&gt;&quot;</span>, !Map.Access(Name));
<a name="l01193"></a>01193             Image* NewData = BxNew(Image);
<a name="l01194"></a>01194             NewData-&gt;SetAttb(Name, Url);
<a name="l01195"></a>01195             Elements.Insert(LAST, Map[Name] = NewData);
<a name="l01196"></a>01196         }
<a name="l01197"></a>01197         <span class="keywordtype">void</span> AddSprite(<a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map, <span class="keywordtype">string</span> Name, <span class="keywordtype">string</span> Images, <span class="keywordtype">string</span> Delay)
<a name="l01198"></a>01198         {
<a name="l01199"></a>01199             BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;중복된 컨텐트명입니다&gt;&quot;</span>, !Map.Access(Name));
<a name="l01200"></a>01200             Sprite* NewData = BxNew(Sprite);
<a name="l01201"></a>01201             NewData-&gt;SetAttb(Name, Images, Delay);
<a name="l01202"></a>01202             Elements.Insert(LAST, Map[Name] = NewData);
<a name="l01203"></a>01203         }
<a name="l01204"></a>01204         <span class="keywordtype">void</span> AddFont(<a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map, <span class="keywordtype">string</span> Name, <span class="keywordtype">string</span> Size, <span class="keywordtype">string</span> Url)
<a name="l01205"></a>01205         {
<a name="l01206"></a>01206             BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;중복된 컨텐트명입니다&gt;&quot;</span>, !Map.Access(Name));
<a name="l01207"></a>01207             Font* NewData = BxNew(Font);
<a name="l01208"></a>01208             NewData-&gt;SetAttb(Name, Size, Url);
<a name="l01209"></a>01209             Elements.Insert(LAST, Map[Name] = NewData);
<a name="l01210"></a>01210         }
<a name="l01211"></a>01211         <span class="keywordtype">void</span> AddText(<a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map, <span class="keywordtype">string</span> Name, <span class="keywordtype">string</span> Format, <span class="keywordtype">string</span> Font, <span class="keywordtype">string</span> Color, <span class="keywordtype">string</span> Vector, <span class="keywordtype">string</span> Line)
<a name="l01212"></a>01212         {
<a name="l01213"></a>01213             BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;중복된 컨텐트명입니다&gt;&quot;</span>, !Map.Access(Name));
<a name="l01214"></a>01214             Text* NewData = BxNew(Text);
<a name="l01215"></a>01215             NewData-&gt;SetAttb(Name, Format, Font, Color, Vector, Line);
<a name="l01216"></a>01216             Elements.Insert(LAST, Map[Name] = NewData);
<a name="l01217"></a>01217         }
<a name="l01218"></a>01218         <span class="keywordtype">void</span> AddButton(<a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map, <span class="keywordtype">string</span> Name, <span class="keywordtype">string</span> Images, <span class="keywordtype">string</span> Edges, <span class="keywordtype">string</span> Event, <span class="keywordtype">string</span> Link)
<a name="l01219"></a>01219         {
<a name="l01220"></a>01220             BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;중복된 컨텐트명입니다&gt;&quot;</span>, !Map.Access(Name));
<a name="l01221"></a>01221             Button* NewData = BxNew(Button);
<a name="l01222"></a>01222             NewData-&gt;SetAttb(Name, Images, Edges, Event, Link);
<a name="l01223"></a>01223             Elements.Insert(LAST, Map[Name] = NewData);
<a name="l01224"></a>01224         }
<a name="l01225"></a>01225         <span class="keywordtype">void</span> AddEditBox(<a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map, <span class="keywordtype">string</span> Name, <span class="keywordtype">string</span> Text, <span class="keywordtype">string</span> Colors)
<a name="l01226"></a>01226         {
<a name="l01227"></a>01227             BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;중복된 컨텐트명입니다&gt;&quot;</span>, !Map.Access(Name));
<a name="l01228"></a>01228             EditBox* NewData = BxNew(EditBox);
<a name="l01229"></a>01229             NewData-&gt;SetAttb(Name, Text, Colors);
<a name="l01230"></a>01230             Elements.Insert(LAST, Map[Name] = NewData);
<a name="l01231"></a>01231         }
<a name="l01232"></a>01232     };
<a name="l01234"></a>01234 
<a name="l01236"></a>01236     <span class="keyword">class </span>Layout
<a name="l01237"></a>01237     {
<a name="l01238"></a>01238     <span class="keyword">protected</span>:
<a name="l01239"></a>01239         ElementTree Top;
<a name="l01240"></a>01240         ElementTree* CurFocus;
<a name="l01241"></a>01241     <span class="keyword">public</span>:
<a name="l01242"></a>01242         <span class="keyword">class </span>Split : <span class="keyword">public</span> ElementTree
<a name="l01243"></a>01243         {
<a name="l01244"></a>01244             <span class="keywordtype">string</span> Name;
<a name="l01245"></a>01245             <span class="keywordtype">string</span> Pos;
<a name="l01246"></a>01246             <span class="keywordtype">string</span> Size;
<a name="l01247"></a>01247             <span class="keywordtype">string</span> Fill;
<a name="l01248"></a>01248         <span class="keyword">protected</span>:
<a name="l01249"></a>01249             <span class="keywordtype">int</span> AddSize1024Gen;
<a name="l01250"></a>01250         <span class="keyword">public</span>:
<a name="l01251"></a>01251             ReserveCode PosValue;
<a name="l01252"></a>01252             Element* _ref_ FillValue;
<a name="l01253"></a>01253         <span class="keyword">public</span>:
<a name="l01254"></a>01254             Split() : Name(null), Pos(null), Size(null), Fill(null), AddSize1024Gen(0), PosValue(CodeNull), FillValue(null) {Type = TypeSplit;}
<a name="l01255"></a>01255             <span class="keyword">virtual</span> ~Split()
<a name="l01256"></a>01256             {
<a name="l01257"></a>01257                 BxFree(Name);
<a name="l01258"></a>01258                 BxFree(Pos);
<a name="l01259"></a>01259                 BxFree(Size);
<a name="l01260"></a>01260                 BxFree(Fill);
<a name="l01261"></a>01261             }
<a name="l01262"></a>01262         <span class="keyword">public</span>:
<a name="l01263"></a>01263             <span class="keywordtype">void</span> SetAttb(<span class="keywordtype">string</span> name, <span class="keywordtype">string</span> pos, <span class="keywordtype">string</span> <a class="code" href="structsize.html" title="size구조체 : w, h">size</a>, <span class="keywordtype">string</span> fill)
<a name="l01264"></a>01264             {
<a name="l01265"></a>01265                 SetStep(StepNamed);
<a name="l01266"></a>01266                 Name = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(name);
<a name="l01267"></a>01267                 Pos = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(<a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a>(<span class="stringliteral">&quot;pos.&quot;</span>) + pos);
<a name="l01268"></a>01268                 Size = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(size);
<a name="l01269"></a>01269                 Fill = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(fill);
<a name="l01270"></a>01270             }
<a name="l01271"></a>01271             <span class="keywordtype">void</span> AdjustSize(<span class="keywordtype">int</span> size1024)
<a name="l01272"></a>01272             {
<a name="l01273"></a>01273                 AddSize1024Gen = size1024;
<a name="l01274"></a>01274             }
<a name="l01275"></a>01275         <span class="keyword">protected</span>:
<a name="l01276"></a>01276             <span class="keyword">virtual</span> <span class="keywordtype">void</span> Linking(<span class="keyword">const</span> <a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map)
<a name="l01277"></a>01277             {
<a name="l01278"></a>01278                 SetStep(StepLinked);
<a name="l01279"></a>01279                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업에 실패했습니다&gt;&quot;</span>, Map.Access(Pos) &amp;&amp; *Map.Access(Pos));
<a name="l01280"></a>01280                 PosValue = (ReserveCode) (*Map.Access(Pos))-&gt;GetValue();
<a name="l01281"></a>01281                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업에 실패했습니다&gt;&quot;</span>, Map.Access(Fill) &amp;&amp; *Map.Access(Fill));
<a name="l01282"></a>01282                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;FILL용 엘리먼트가 아닙니다&gt;&quot;</span>, (*Map.Access(Fill))-&gt;IsValidFill());
<a name="l01283"></a>01283                 FillValue = *Map.Access(Fill);
<a name="l01284"></a>01284             }
<a name="l01285"></a>01285             <span class="keyword">virtual</span> <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> Rendering(<span class="keyword">const</span> <a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map, <a class="code" href="class_bx_draw.html" title="OpenGL/SW랜더링기반 그리기도구">BxDraw</a>&amp; Draw, <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> Rect, <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> _out_ InRect)
<a name="l01286"></a>01286             {
<a name="l01287"></a>01287                 InRect = Rect;
<a name="l01288"></a>01288                 <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> OutRect = Rect;
<a name="l01289"></a>01289                 <span class="keyword">const</span> <span class="keywordtype">int</span> RectWidth = Rect.r - Rect.l;
<a name="l01290"></a>01290                 <span class="keyword">const</span> <span class="keywordtype">int</span> RectHeight = Rect.b - Rect.t;
<a name="l01291"></a>01291                 <span class="keywordflow">if</span>(0 &lt; RectWidth &amp;&amp; 0 &lt; RectHeight)
<a name="l01292"></a>01292                 {
<a name="l01293"></a>01293                     <span class="comment">// 동적데이터</span>
<a name="l01294"></a>01294                     <span class="keywordtype">int</span> WidthValue = 0, HeightValue = 0;
<a name="l01295"></a>01295                     <span class="keywordflow">if</span>(Map.Access(Size)) WidthValue = (*Map.Access(Size))-&gt;GetValue();
<a name="l01296"></a>01296                     <span class="keywordflow">else</span> WidthValue = <a class="code" href="namespace_bx_util_global.html#a9d45cf5f144f0aaa40fa169feb915ea1" title="스트링을 정수로 변환">BxUtilGlobal::AtoI</a>(Size) * ((Size[<a class="code" href="namespace_bx_util_global.html#a677b3048a42145d09849067b4d4a73ce" title="스트링길이 구하기">BxUtilGlobal::StrLen</a>(Size) - 1] == <span class="charliteral">&#39;%&#39;</span>)? -1 : 1);
<a name="l01297"></a>01297                     <span class="keywordflow">if</span>(Map.Access(Size)) HeightValue = (*Map.Access(Size))-&gt;GetValue();
<a name="l01298"></a>01298                     <span class="keywordflow">else</span> HeightValue = <a class="code" href="namespace_bx_util_global.html#a9d45cf5f144f0aaa40fa169feb915ea1" title="스트링을 정수로 변환">BxUtilGlobal::AtoI</a>(Size) * ((Size[<a class="code" href="namespace_bx_util_global.html#a677b3048a42145d09849067b4d4a73ce" title="스트링길이 구하기">BxUtilGlobal::StrLen</a>(Size) - 1] == <span class="charliteral">&#39;%&#39;</span>)? -1 : 1);
<a name="l01299"></a>01299                     <span class="keywordflow">if</span>(WidthValue &lt; 0) WidthValue = RectWidth * -WidthValue / 100;
<a name="l01300"></a>01300                     <span class="keywordflow">if</span>(HeightValue &lt; 0) HeightValue = RectHeight * -HeightValue / 100;
<a name="l01301"></a>01301                     <span class="keyword">const</span> <span class="keywordtype">int</span> AddWidthValue = RectWidth * AddSize1024Gen / 1024;
<a name="l01302"></a>01302                     <span class="keyword">const</span> <span class="keywordtype">int</span> AddHeightValue = RectHeight * AddSize1024Gen / 1024;
<a name="l01303"></a>01303                     <span class="comment">// 구획작업</span>
<a name="l01304"></a>01304                     <span class="keywordflow">switch</span>(PosValue)
<a name="l01305"></a>01305                     {
<a name="l01306"></a>01306                     <span class="keywordflow">case</span> CodeLeft: OutRect.l = InRect.r = InRect.l + <a class="code" href="namespace_bx_util_global.html#ab3bbc4ea5f14c15a837e50f2a216271e" title="최소최대 한계설정">BxUtilGlobal::MinMax</a>(0, WidthValue + AddWidthValue, RectWidth); <span class="keywordflow">break</span>;
<a name="l01307"></a>01307                     <span class="keywordflow">case</span> CodeTop: OutRect.t = InRect.b = InRect.t + <a class="code" href="namespace_bx_util_global.html#ab3bbc4ea5f14c15a837e50f2a216271e" title="최소최대 한계설정">BxUtilGlobal::MinMax</a>(0, HeightValue + AddHeightValue, RectHeight); <span class="keywordflow">break</span>;
<a name="l01308"></a>01308                     <span class="keywordflow">case</span> CodeRight: OutRect.r = InRect.l = InRect.r - <a class="code" href="namespace_bx_util_global.html#ab3bbc4ea5f14c15a837e50f2a216271e" title="최소최대 한계설정">BxUtilGlobal::MinMax</a>(0, WidthValue + AddWidthValue, RectWidth); <span class="keywordflow">break</span>;
<a name="l01309"></a>01309                     <span class="keywordflow">case</span> CodeBottom: OutRect.b = InRect.t = InRect.b - <a class="code" href="namespace_bx_util_global.html#ab3bbc4ea5f14c15a837e50f2a216271e" title="최소최대 한계설정">BxUtilGlobal::MinMax</a>(0, HeightValue + AddHeightValue, RectHeight); <span class="keywordflow">break</span>;
<a name="l01310"></a>01310                     }
<a name="l01311"></a>01311                     <span class="keywordflow">if</span>(FillValue &amp;&amp; FillValue-&gt;GetType() != TypeNull)
<a name="l01312"></a>01312                         FillValue-&gt;Filling(Draw, InRect);
<a name="l01313"></a>01313                 }
<a name="l01314"></a>01314                 <span class="keywordflow">return</span> OutRect;
<a name="l01315"></a>01315             }
<a name="l01316"></a>01316             <span class="keyword">virtual</span> <span class="keywordtype">bool</span> OnEvent(<span class="keyword">const</span> <a class="code" href="structsysevent.html" title="OnEvent()의 이벤트파라미터">sysevent</a>&amp; Event)
<a name="l01317"></a>01317             {
<a name="l01318"></a>01318                 <span class="keywordflow">if</span>(FillValue &amp;&amp; FillValue-&gt;GetType() != TypeNull)
<a name="l01319"></a>01319                     <span class="keywordflow">return</span> FillValue-&gt;OnEvent(Event);
<a name="l01320"></a>01320                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01321"></a>01321             }
<a name="l01322"></a>01322         };
<a name="l01323"></a>01323         <span class="keyword">class </span>Outline : <span class="keyword">public</span> ElementTree
<a name="l01324"></a>01324         {
<a name="l01325"></a>01325             <span class="keywordtype">string</span> Name;
<a name="l01326"></a>01326             <span class="keywordtype">string</span> Size;
<a name="l01327"></a>01327             <span class="keywordtype">string</span> Fill;
<a name="l01328"></a>01328         <span class="keyword">public</span>:
<a name="l01329"></a>01329             Element* _ref_ FillValue;
<a name="l01330"></a>01330         <span class="keyword">public</span>:
<a name="l01331"></a>01331             Outline() : Name(null), Size(null), Fill(null), FillValue(null) {Type = TypeOutline;}
<a name="l01332"></a>01332             <span class="keyword">virtual</span> ~Outline()
<a name="l01333"></a>01333             {
<a name="l01334"></a>01334                 BxFree(Name);
<a name="l01335"></a>01335                 BxFree(Size);
<a name="l01336"></a>01336                 BxFree(Fill);
<a name="l01337"></a>01337             }
<a name="l01338"></a>01338         <span class="keyword">public</span>:
<a name="l01339"></a>01339             <span class="keywordtype">void</span> SetAttb(<span class="keywordtype">string</span> name, <span class="keywordtype">string</span> <a class="code" href="structsize.html" title="size구조체 : w, h">size</a>, <span class="keywordtype">string</span> fill)
<a name="l01340"></a>01340             {
<a name="l01341"></a>01341                 SetStep(StepNamed);
<a name="l01342"></a>01342                 Name = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(name);
<a name="l01343"></a>01343                 Size = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(size);
<a name="l01344"></a>01344                 Fill = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(fill);
<a name="l01345"></a>01345             }
<a name="l01346"></a>01346         <span class="keyword">protected</span>:
<a name="l01347"></a>01347             <span class="keyword">virtual</span> <span class="keywordtype">void</span> Linking(<span class="keyword">const</span> <a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map)
<a name="l01348"></a>01348             {
<a name="l01349"></a>01349                 SetStep(StepLinked);
<a name="l01350"></a>01350                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;outline/size에서는 백분율이 사용될 수 없습니다&gt;&quot;</span>, Size[<a class="code" href="namespace_bx_util_global.html#a677b3048a42145d09849067b4d4a73ce" title="스트링길이 구하기">BxUtilGlobal::StrLen</a>(Size) - 1] != <span class="charliteral">&#39;%&#39;</span>);
<a name="l01351"></a>01351                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업에 실패했습니다&gt;&quot;</span>, Map.Access(Fill) &amp;&amp; *Map.Access(Fill));
<a name="l01352"></a>01352                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;FILL용 엘리먼트가 아닙니다&gt;&quot;</span>, (*Map.Access(Fill))-&gt;IsValidFill());
<a name="l01353"></a>01353                 FillValue = *Map.Access(Fill);
<a name="l01354"></a>01354             }
<a name="l01355"></a>01355             <span class="keyword">virtual</span> <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> Rendering(<span class="keyword">const</span> <a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map, <a class="code" href="class_bx_draw.html" title="OpenGL/SW랜더링기반 그리기도구">BxDraw</a>&amp; Draw, <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> Rect, <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> _out_ InRect)
<a name="l01356"></a>01356             {
<a name="l01357"></a>01357                 InRect = Rect;
<a name="l01358"></a>01358                 <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> OutRect = Rect;
<a name="l01359"></a>01359                 <span class="keyword">const</span> <span class="keywordtype">int</span> RectWidth = Rect.r - Rect.l;
<a name="l01360"></a>01360                 <span class="keyword">const</span> <span class="keywordtype">int</span> RectHeight = Rect.b - Rect.t;
<a name="l01361"></a>01361                 <span class="keywordflow">if</span>(0 &lt; RectWidth &amp;&amp; 0 &lt; RectHeight)
<a name="l01362"></a>01362                 {
<a name="l01363"></a>01363                     <span class="comment">// 동적데이터</span>
<a name="l01364"></a>01364                     <span class="keywordtype">int</span> SizeValue = 0;
<a name="l01365"></a>01365                     <span class="keywordflow">if</span>(Map.Access(Size)) SizeValue = (*Map.Access(Size))-&gt;GetValue();
<a name="l01366"></a>01366                     <span class="keywordflow">else</span> SizeValue = <a class="code" href="namespace_bx_util_global.html#a9d45cf5f144f0aaa40fa169feb915ea1" title="스트링을 정수로 변환">BxUtilGlobal::AtoI</a>(Size);
<a name="l01367"></a>01367                     <span class="comment">// 구획작업</span>
<a name="l01368"></a>01368                     <span class="keyword">const</span> <span class="keywordtype">int</span> OutRectWidth = <a class="code" href="namespace_bx_util_global.html#a52580a7f5dbd7722b56eab2e3167292f" title="최대값 구하기">BxUtilGlobal::Max</a>(0, RectWidth - SizeValue * 2);
<a name="l01369"></a>01369                     <span class="keyword">const</span> <span class="keywordtype">int</span> OutRectHeight = <a class="code" href="namespace_bx_util_global.html#a52580a7f5dbd7722b56eab2e3167292f" title="최대값 구하기">BxUtilGlobal::Max</a>(0, RectHeight - SizeValue * 2);
<a name="l01370"></a>01370                     OutRect.r = (OutRect.l += SizeValue) + OutRectWidth;
<a name="l01371"></a>01371                     OutRect.b = (OutRect.t += SizeValue) + OutRectHeight;
<a name="l01372"></a>01372                     <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> ChildRect[4] = {Rect, Rect, Rect, Rect};
<a name="l01373"></a>01373                     ChildRect[0].b = OutRect.t; <span class="comment">// 상측</span>
<a name="l01374"></a>01374                     ChildRect[1].t = OutRect.b; <span class="comment">// 하측</span>
<a name="l01375"></a>01375                     ChildRect[2].r = OutRect.l; <span class="comment">// 상하사이에 낀 좌측</span>
<a name="l01376"></a>01376                     ChildRect[2].t = OutRect.t;
<a name="l01377"></a>01377                     ChildRect[2].b = OutRect.b;
<a name="l01378"></a>01378                     ChildRect[3].l = OutRect.r; <span class="comment">// 상하사이에 낀 우측</span>
<a name="l01379"></a>01379                     ChildRect[3].t = OutRect.t;
<a name="l01380"></a>01380                     ChildRect[3].b = OutRect.b;
<a name="l01381"></a>01381                     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 4; ++i)
<a name="l01382"></a>01382                         <span class="keywordflow">if</span>(FillValue &amp;&amp; FillValue-&gt;GetType() != TypeNull)
<a name="l01383"></a>01383                             FillValue-&gt;Filling(Draw, ChildRect[i]);
<a name="l01384"></a>01384                 }
<a name="l01385"></a>01385                 <span class="keywordflow">return</span> OutRect;
<a name="l01386"></a>01386             }
<a name="l01387"></a>01387             <span class="keyword">virtual</span> <span class="keywordtype">bool</span> OnEvent(<span class="keyword">const</span> <a class="code" href="structsysevent.html" title="OnEvent()의 이벤트파라미터">sysevent</a>&amp; Event)
<a name="l01388"></a>01388             {
<a name="l01389"></a>01389                 <span class="keywordflow">if</span>(FillValue &amp;&amp; FillValue-&gt;GetType() != TypeNull)
<a name="l01390"></a>01390                     <span class="keywordflow">return</span> FillValue-&gt;OnEvent(Event);
<a name="l01391"></a>01391                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01392"></a>01392             }
<a name="l01393"></a>01393         };
<a name="l01394"></a>01394         <span class="keyword">class </span>Extra : <span class="keyword">public</span> ElementTree
<a name="l01395"></a>01395         {
<a name="l01396"></a>01396             <span class="keywordtype">string</span> Name;
<a name="l01397"></a>01397             <span class="keywordtype">string</span> Width;
<a name="l01398"></a>01398             <span class="keywordtype">string</span> Height;
<a name="l01399"></a>01399             <span class="keywordtype">string</span> Fill;
<a name="l01400"></a>01400         <span class="keyword">public</span>:
<a name="l01401"></a>01401             Element* _ref_ FillValue;
<a name="l01402"></a>01402         <span class="keyword">public</span>:
<a name="l01403"></a>01403             Extra() : Name(null), Width(null), Height(null), Fill(null), FillValue(null) {Type = TypeExtra;}
<a name="l01404"></a>01404             <span class="keyword">virtual</span> ~Extra()
<a name="l01405"></a>01405             {
<a name="l01406"></a>01406                 BxFree(Name);
<a name="l01407"></a>01407                 BxFree(Width);
<a name="l01408"></a>01408                 BxFree(Height);
<a name="l01409"></a>01409                 BxFree(Fill);
<a name="l01410"></a>01410             }
<a name="l01411"></a>01411         <span class="keyword">public</span>:
<a name="l01412"></a>01412             <span class="keywordtype">void</span> SetAttb(<span class="keywordtype">string</span> name, <span class="keywordtype">string</span> width, <span class="keywordtype">string</span> height, <span class="keywordtype">string</span> fill)
<a name="l01413"></a>01413             {
<a name="l01414"></a>01414                 SetStep(StepNamed);
<a name="l01415"></a>01415                 Name = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(name);
<a name="l01416"></a>01416                 Width = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(width);
<a name="l01417"></a>01417                 Height = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(height);
<a name="l01418"></a>01418                 Fill = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(fill);
<a name="l01419"></a>01419             }
<a name="l01420"></a>01420         <span class="keyword">protected</span>:
<a name="l01421"></a>01421             <span class="keyword">virtual</span> <span class="keywordtype">void</span> Linking(<span class="keyword">const</span> <a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map)
<a name="l01422"></a>01422             {
<a name="l01423"></a>01423                 SetStep(StepLinked);
<a name="l01424"></a>01424                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업에 실패했습니다&gt;&quot;</span>, Map.Access(Fill) &amp;&amp; *Map.Access(Fill));
<a name="l01425"></a>01425                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;FILL용 엘리먼트가 아닙니다&gt;&quot;</span>, (*Map.Access(Fill))-&gt;IsValidFill());
<a name="l01426"></a>01426                 FillValue = *Map.Access(Fill);
<a name="l01427"></a>01427             }
<a name="l01428"></a>01428             <span class="keyword">virtual</span> <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> Rendering(<span class="keyword">const</span> <a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map, <a class="code" href="class_bx_draw.html" title="OpenGL/SW랜더링기반 그리기도구">BxDraw</a>&amp; Draw, <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> Rect, <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> _out_ InRect)
<a name="l01429"></a>01429             {
<a name="l01430"></a>01430                 InRect = Rect;
<a name="l01431"></a>01431                 <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> OutRect = Rect;
<a name="l01432"></a>01432                 <span class="keyword">const</span> <span class="keywordtype">int</span> RectWidth = Rect.r - Rect.l;
<a name="l01433"></a>01433                 <span class="keyword">const</span> <span class="keywordtype">int</span> RectHeight = Rect.b - Rect.t;
<a name="l01434"></a>01434                 <span class="keywordflow">if</span>(0 &lt; RectWidth &amp;&amp; 0 &lt; RectHeight)
<a name="l01435"></a>01435                 {
<a name="l01436"></a>01436                     <span class="comment">// 동적데이터</span>
<a name="l01437"></a>01437                     <span class="keywordtype">int</span> WidthValue = 0, HeightValue = 0;
<a name="l01438"></a>01438                     <span class="keywordflow">if</span>(Map.Access(Width)) WidthValue = (*Map.Access(Width))-&gt;GetValue();
<a name="l01439"></a>01439                     <span class="keywordflow">else</span> WidthValue = <a class="code" href="namespace_bx_util_global.html#a9d45cf5f144f0aaa40fa169feb915ea1" title="스트링을 정수로 변환">BxUtilGlobal::AtoI</a>(Width) * ((Width[<a class="code" href="namespace_bx_util_global.html#a677b3048a42145d09849067b4d4a73ce" title="스트링길이 구하기">BxUtilGlobal::StrLen</a>(Width) - 1] == <span class="charliteral">&#39;%&#39;</span>)? -1 : 1);
<a name="l01440"></a>01440                     <span class="keywordflow">if</span>(Map.Access(Height)) HeightValue = (*Map.Access(Height))-&gt;GetValue();
<a name="l01441"></a>01441                     <span class="keywordflow">else</span> HeightValue = <a class="code" href="namespace_bx_util_global.html#a9d45cf5f144f0aaa40fa169feb915ea1" title="스트링을 정수로 변환">BxUtilGlobal::AtoI</a>(Height) * ((Height[<a class="code" href="namespace_bx_util_global.html#a677b3048a42145d09849067b4d4a73ce" title="스트링길이 구하기">BxUtilGlobal::StrLen</a>(Height) - 1] == <span class="charliteral">&#39;%&#39;</span>)? -1 : 1);
<a name="l01442"></a>01442                     <span class="keywordflow">if</span>(WidthValue &lt; 0) WidthValue = RectWidth * -WidthValue / 100;
<a name="l01443"></a>01443                     <span class="keywordflow">if</span>(HeightValue &lt; 0) HeightValue = RectHeight * -HeightValue / 100;
<a name="l01444"></a>01444                     <span class="comment">// 구획작업</span>
<a name="l01445"></a>01445                     <span class="keyword">const</span> <span class="keywordtype">int</span> OutRectWidth = <a class="code" href="namespace_bx_util_global.html#ab3bbc4ea5f14c15a837e50f2a216271e" title="최소최대 한계설정">BxUtilGlobal::MinMax</a>(0, WidthValue, RectWidth);
<a name="l01446"></a>01446                     <span class="keyword">const</span> <span class="keywordtype">int</span> OutRectHeight = <a class="code" href="namespace_bx_util_global.html#ab3bbc4ea5f14c15a837e50f2a216271e" title="최소최대 한계설정">BxUtilGlobal::MinMax</a>(0, HeightValue, RectHeight);
<a name="l01447"></a>01447                     OutRect.r = (OutRect.l += (RectWidth - OutRectWidth) / 2) + OutRectWidth;
<a name="l01448"></a>01448                     OutRect.b = (OutRect.t += (RectHeight - OutRectHeight) / 2) + OutRectHeight;
<a name="l01449"></a>01449                     <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> ChildRect[4] = {Rect, Rect, Rect, Rect};
<a name="l01450"></a>01450                     ChildRect[0].b = OutRect.t; <span class="comment">// 상측</span>
<a name="l01451"></a>01451                     ChildRect[1].t = OutRect.b; <span class="comment">// 하측</span>
<a name="l01452"></a>01452                     ChildRect[2].r = OutRect.l; <span class="comment">// 상하사이에 낀 좌측</span>
<a name="l01453"></a>01453                     ChildRect[2].t = OutRect.t;
<a name="l01454"></a>01454                     ChildRect[2].b = OutRect.b;
<a name="l01455"></a>01455                     ChildRect[3].l = OutRect.r; <span class="comment">// 상하사이에 낀 우측</span>
<a name="l01456"></a>01456                     ChildRect[3].t = OutRect.t;
<a name="l01457"></a>01457                     ChildRect[3].b = OutRect.b;
<a name="l01458"></a>01458                     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 4; ++i)
<a name="l01459"></a>01459                         <span class="keywordflow">if</span>(FillValue &amp;&amp; FillValue-&gt;GetType() != TypeNull)
<a name="l01460"></a>01460                             FillValue-&gt;Filling(Draw, ChildRect[i]);
<a name="l01461"></a>01461                 }
<a name="l01462"></a>01462                 <span class="keywordflow">return</span> OutRect;
<a name="l01463"></a>01463             }
<a name="l01464"></a>01464             <span class="keyword">virtual</span> <span class="keywordtype">bool</span> OnEvent(<span class="keyword">const</span> <a class="code" href="structsysevent.html" title="OnEvent()의 이벤트파라미터">sysevent</a>&amp; Event)
<a name="l01465"></a>01465             {
<a name="l01466"></a>01466                 <span class="keywordflow">if</span>(FillValue &amp;&amp; FillValue-&gt;GetType() != TypeNull)
<a name="l01467"></a>01467                     <span class="keywordflow">return</span> FillValue-&gt;OnEvent(Event);
<a name="l01468"></a>01468                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01469"></a>01469             }
<a name="l01470"></a>01470         };
<a name="l01471"></a>01471         <span class="keyword">class </span>View : <span class="keyword">public</span> ElementTree
<a name="l01472"></a>01472         {
<a name="l01473"></a>01473             <span class="keywordtype">string</span> Name;
<a name="l01474"></a>01474             <span class="keywordtype">string</span> PosX;
<a name="l01475"></a>01475             <span class="keywordtype">string</span> PosY;
<a name="l01476"></a>01476             <span class="keywordtype">string</span> Width;
<a name="l01477"></a>01477             <span class="keywordtype">string</span> Height;
<a name="l01478"></a>01478             <span class="keywordtype">string</span> Scroll;
<a name="l01479"></a>01479             <span class="keywordtype">string</span> Fill;
<a name="l01480"></a>01480         <span class="keyword">protected</span>:
<a name="l01481"></a>01481             <span class="keywordtype">int</span> AddPosXGen;
<a name="l01482"></a>01482             <span class="keywordtype">int</span> AddPosYGen;
<a name="l01483"></a>01483             <span class="keywordtype">bool</span> IsVisibleGen;
<a name="l01484"></a>01484             <a class="code" href="structsize.html" title="size구조체 : w, h">size</a> OutSizeGen;
<a name="l01485"></a>01485             <a class="code" href="structsize.html" title="size구조체 : w, h">size</a> InSizeGen;
<a name="l01486"></a>01486         <span class="keyword">public</span>:
<a name="l01487"></a>01487             ReserveCode PosXValue;
<a name="l01488"></a>01488             ReserveCode PosYValue;
<a name="l01489"></a>01489             ReserveCode ScrollValue;
<a name="l01490"></a>01490             Element* _ref_ FillValue;
<a name="l01491"></a>01491         <span class="keyword">public</span>:
<a name="l01492"></a>01492             View() : Name(null), PosX(null), PosY(null), Width(null), Height(null), Scroll(null), Fill(null),
<a name="l01493"></a>01493                 AddPosXGen(0), AddPosYGen(0), IsVisibleGen(<span class="keyword">false</span>), OutSizeGen(size::zero()), InSizeGen(size::zero()),
<a name="l01494"></a>01494                 PosXValue(CodeNull), PosYValue(CodeNull), ScrollValue(CodeNull), FillValue(null) {Type = TypeView;}
<a name="l01495"></a>01495             <span class="keyword">virtual</span> ~View()
<a name="l01496"></a>01496             {
<a name="l01497"></a>01497                 BxFree(Name);
<a name="l01498"></a>01498                 BxFree(PosX);
<a name="l01499"></a>01499                 BxFree(PosY);
<a name="l01500"></a>01500                 BxFree(Width);
<a name="l01501"></a>01501                 BxFree(Height);
<a name="l01502"></a>01502                 BxFree(Scroll);
<a name="l01503"></a>01503                 BxFree(Fill);
<a name="l01504"></a>01504             }
<a name="l01505"></a>01505         <span class="keyword">public</span>:
<a name="l01506"></a>01506             <span class="keywordtype">void</span> SetAttb(<span class="keywordtype">string</span> name, <span class="keywordtype">string</span> posx, <span class="keywordtype">string</span> posy, <span class="keywordtype">string</span> width, <span class="keywordtype">string</span> height, <span class="keywordtype">string</span> scroll, <span class="keywordtype">string</span> fill)
<a name="l01507"></a>01507             {
<a name="l01508"></a>01508                 SetStep(StepNamed);
<a name="l01509"></a>01509                 Name = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(name);
<a name="l01510"></a>01510                 PosX = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(<a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a>(<span class="stringliteral">&quot;posx.&quot;</span>) + posx);
<a name="l01511"></a>01511                 PosY = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(<a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a>(<span class="stringliteral">&quot;posy.&quot;</span>) + posy);
<a name="l01512"></a>01512                 Width = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(width);
<a name="l01513"></a>01513                 Height = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(height);
<a name="l01514"></a>01514                 Scroll = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(<a class="code" href="class_bx_string.html" title="스트링 관리">BxString</a>(<span class="stringliteral">&quot;scroll.&quot;</span>) + scroll);
<a name="l01515"></a>01515                 Fill = <a class="code" href="namespace_bx_util_global.html#a43f15a44ea82002b6ade6dfcffd0bac9" title="스트링 할당 및 복사하기">BxUtilGlobal::StrCpyWithAlloc</a>(fill);
<a name="l01516"></a>01516             }
<a name="l01517"></a>01517             <span class="keywordtype">void</span> AdjustScroll(<span class="keywordtype">int</span> posx, <span class="keywordtype">int</span> posy)
<a name="l01518"></a>01518             {
<a name="l01519"></a>01519                 AddPosXGen = posx;
<a name="l01520"></a>01520                 AddPosYGen = posy;
<a name="l01521"></a>01521             }
<a name="l01522"></a>01522             <span class="keywordtype">bool</span> GetSize(<a class="code" href="structsize.html" title="size구조체 : w, h">size</a>&amp; outsize, <a class="code" href="structsize.html" title="size구조체 : w, h">size</a>&amp; insize)
<a name="l01523"></a>01523             {
<a name="l01524"></a>01524                 <span class="keywordflow">if</span>(!IsVisibleGen) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01525"></a>01525                 outsize = OutSizeGen;
<a name="l01526"></a>01526                 insize = InSizeGen;
<a name="l01527"></a>01527                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01528"></a>01528             }
<a name="l01529"></a>01529         <span class="keyword">protected</span>:
<a name="l01530"></a>01530             <span class="keyword">virtual</span> <span class="keywordtype">void</span> Linking(<span class="keyword">const</span> <a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map)
<a name="l01531"></a>01531             {
<a name="l01532"></a>01532                 SetStep(StepLinked);
<a name="l01533"></a>01533                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업에 실패했습니다&gt;&quot;</span>, Map.Access(PosX) &amp;&amp; *Map.Access(PosX));
<a name="l01534"></a>01534                 PosXValue = (ReserveCode) (*Map.Access(PosX))-&gt;GetValue();
<a name="l01535"></a>01535                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업에 실패했습니다&gt;&quot;</span>, Map.Access(PosY) &amp;&amp; *Map.Access(PosY));
<a name="l01536"></a>01536                 PosYValue = (ReserveCode) (*Map.Access(PosY))-&gt;GetValue();
<a name="l01537"></a>01537                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업에 실패했습니다&gt;&quot;</span>, Map.Access(Scroll) &amp;&amp; *Map.Access(Scroll));
<a name="l01538"></a>01538                 ScrollValue = (ReserveCode) (*Map.Access(Scroll))-&gt;GetValue();
<a name="l01539"></a>01539                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;연결작업에 실패했습니다&gt;&quot;</span>, Map.Access(Fill) &amp;&amp; *Map.Access(Fill));
<a name="l01540"></a>01540                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;FILL용 엘리먼트가 아닙니다&gt;&quot;</span>, (*Map.Access(Fill))-&gt;IsValidFill());
<a name="l01541"></a>01541                 FillValue = *Map.Access(Fill);
<a name="l01542"></a>01542             }
<a name="l01543"></a>01543             <span class="keyword">virtual</span> <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> Rendering(<span class="keyword">const</span> <a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map, <a class="code" href="class_bx_draw.html" title="OpenGL/SW랜더링기반 그리기도구">BxDraw</a>&amp; Draw, <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> Rect, <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> _out_ InRect)
<a name="l01544"></a>01544             {
<a name="l01545"></a>01545                 InRect = Rect;
<a name="l01546"></a>01546                 <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> OutRect = Rect;
<a name="l01547"></a>01547                 <span class="keyword">const</span> <span class="keywordtype">int</span> RectWidth = Rect.r - Rect.l;
<a name="l01548"></a>01548                 <span class="keyword">const</span> <span class="keywordtype">int</span> RectHeight = Rect.b - Rect.t;
<a name="l01549"></a>01549                 <span class="keywordflow">if</span>(0 &lt; RectWidth &amp;&amp; 0 &lt; RectHeight)
<a name="l01550"></a>01550                 {
<a name="l01551"></a>01551                     <span class="comment">// 동적데이터</span>
<a name="l01552"></a>01552                     <span class="keywordtype">int</span> WidthValue = 0, HeightValue = 0;
<a name="l01553"></a>01553                     <span class="keywordflow">if</span>(Map.Access(Width)) WidthValue = (*Map.Access(Width))-&gt;GetValue();
<a name="l01554"></a>01554                     <span class="keywordflow">else</span> WidthValue = <a class="code" href="namespace_bx_util_global.html#a9d45cf5f144f0aaa40fa169feb915ea1" title="스트링을 정수로 변환">BxUtilGlobal::AtoI</a>(Width) * ((Width[<a class="code" href="namespace_bx_util_global.html#a677b3048a42145d09849067b4d4a73ce" title="스트링길이 구하기">BxUtilGlobal::StrLen</a>(Width) - 1] == <span class="charliteral">&#39;%&#39;</span>)? -1 : 1);
<a name="l01555"></a>01555                     <span class="keywordflow">if</span>(Map.Access(Height)) HeightValue = (*Map.Access(Height))-&gt;GetValue();
<a name="l01556"></a>01556                     <span class="keywordflow">else</span> HeightValue = <a class="code" href="namespace_bx_util_global.html#a9d45cf5f144f0aaa40fa169feb915ea1" title="스트링을 정수로 변환">BxUtilGlobal::AtoI</a>(Height) * ((Height[<a class="code" href="namespace_bx_util_global.html#a677b3048a42145d09849067b4d4a73ce" title="스트링길이 구하기">BxUtilGlobal::StrLen</a>(Height) - 1] == <span class="charliteral">&#39;%&#39;</span>)? -1 : 1);
<a name="l01557"></a>01557                     <span class="keywordflow">if</span>(WidthValue &lt; 0) WidthValue = RectWidth * -WidthValue / 100;
<a name="l01558"></a>01558                     <span class="keywordflow">if</span>(HeightValue &lt; 0) HeightValue = RectHeight * -HeightValue / 100;
<a name="l01559"></a>01559                     InRect.l -= AddPosXGen;
<a name="l01560"></a>01560                     InRect.t -= AddPosYGen;
<a name="l01561"></a>01561                     <span class="comment">// 구획작업</span>
<a name="l01562"></a>01562                     <span class="keywordflow">switch</span>(PosXValue)
<a name="l01563"></a>01563                     {
<a name="l01564"></a>01564                     <span class="keywordflow">case</span> CodeLeft: InRect.r = InRect.l + <a class="code" href="namespace_bx_util_global.html#a52580a7f5dbd7722b56eab2e3167292f" title="최대값 구하기">BxUtilGlobal::Max</a>(0, WidthValue); <span class="keywordflow">break</span>;
<a name="l01565"></a>01565                     <span class="keywordflow">case</span> CodeRight: InRect.l = InRect.r - <a class="code" href="namespace_bx_util_global.html#a52580a7f5dbd7722b56eab2e3167292f" title="최대값 구하기">BxUtilGlobal::Max</a>(0, WidthValue); <span class="keywordflow">break</span>;
<a name="l01566"></a>01566                     }
<a name="l01567"></a>01567                     <span class="keywordflow">switch</span>(PosYValue)
<a name="l01568"></a>01568                     {
<a name="l01569"></a>01569                     <span class="keywordflow">case</span> CodeTop: InRect.b = InRect.t + <a class="code" href="namespace_bx_util_global.html#a52580a7f5dbd7722b56eab2e3167292f" title="최대값 구하기">BxUtilGlobal::Max</a>(0, HeightValue); <span class="keywordflow">break</span>;
<a name="l01570"></a>01570                     <span class="keywordflow">case</span> CodeBottom: InRect.t = InRect.b - <a class="code" href="namespace_bx_util_global.html#a52580a7f5dbd7722b56eab2e3167292f" title="최대값 구하기">BxUtilGlobal::Max</a>(0, HeightValue); <span class="keywordflow">break</span>;
<a name="l01571"></a>01571                     }
<a name="l01572"></a>01572                     <span class="comment">// 상태기록</span>
<a name="l01573"></a>01573                     IsVisibleGen = <span class="keyword">true</span>;
<a name="l01574"></a>01574                     OutSizeGen = WH(OutRect.r - OutRect.l, OutRect.b - OutRect.t);
<a name="l01575"></a>01575                     InSizeGen = WH(InRect.r - InRect.l, InRect.b - InRect.t);
<a name="l01576"></a>01576                     <span class="comment">// 칠하기</span>
<a name="l01577"></a>01577                     <span class="keywordflow">if</span>(FillValue &amp;&amp; FillValue-&gt;GetType() != TypeNull)
<a name="l01578"></a>01578                         FillValue-&gt;Filling(Draw, InRect);
<a name="l01579"></a>01579                 }
<a name="l01580"></a>01580                 <span class="keywordflow">else</span> IsVisibleGen = <span class="keyword">false</span>;
<a name="l01581"></a>01581                 <span class="keywordflow">return</span> OutRect;
<a name="l01582"></a>01582             }
<a name="l01583"></a>01583             <span class="keyword">virtual</span> <span class="keywordtype">bool</span> OnEvent(<span class="keyword">const</span> <a class="code" href="structsysevent.html" title="OnEvent()의 이벤트파라미터">sysevent</a>&amp; Event)
<a name="l01584"></a>01584             {
<a name="l01585"></a>01585                 <span class="keywordflow">if</span>(FillValue &amp;&amp; FillValue-&gt;GetType() != TypeNull)
<a name="l01586"></a>01586                     <span class="keywordflow">return</span> FillValue-&gt;OnEvent(Event);
<a name="l01587"></a>01587                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01588"></a>01588             }
<a name="l01589"></a>01589         };
<a name="l01590"></a>01590     <span class="keyword">public</span>:
<a name="l01591"></a>01591         Layout() {CurFocus = &amp;Top;}
<a name="l01592"></a>01592         ~Layout() {}
<a name="l01593"></a>01593     <span class="keyword">public</span>:
<a name="l01594"></a>01594         <span class="keywordtype">void</span> PreProcessing()
<a name="l01595"></a>01595         {
<a name="l01596"></a>01596             Top.PreProcessingTree();
<a name="l01597"></a>01597         }
<a name="l01598"></a>01598         <span class="keywordtype">void</span> Processing()
<a name="l01599"></a>01599         {
<a name="l01600"></a>01600             Top.ProcessingTree();
<a name="l01601"></a>01601         }
<a name="l01602"></a>01602         <span class="keywordtype">void</span> Linking(<span class="keyword">const</span> <a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map)
<a name="l01603"></a>01603         {
<a name="l01604"></a>01604             Top.LinkingTree(Map);
<a name="l01605"></a>01605         }
<a name="l01606"></a>01606         <span class="keywordtype">void</span> Push(<span class="keywordtype">int</span> i)
<a name="l01607"></a>01607         {
<a name="l01608"></a>01608             CurFocus = CurFocus-&gt;GetChild(i);
<a name="l01609"></a>01609         }
<a name="l01610"></a>01610         <span class="keywordtype">void</span> Pull()
<a name="l01611"></a>01611         {
<a name="l01612"></a>01612             CurFocus = CurFocus-&gt;GetParent();
<a name="l01613"></a>01613         }
<a name="l01614"></a>01614         <span class="keywordtype">void</span> AddSplit(<a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map, <span class="keywordtype">string</span> Name, <span class="keywordtype">string</span> Pos, <span class="keywordtype">string</span> Size, <span class="keywordtype">string</span> Fill)
<a name="l01615"></a>01615         {
<a name="l01616"></a>01616             Split* NewData = BxNew(Split);
<a name="l01617"></a>01617             NewData-&gt;SetAttb(Name, Pos, Size, Fill);
<a name="l01618"></a>01618             CurFocus-&gt;AddChild(NewData);
<a name="l01619"></a>01619             <span class="keywordflow">if</span>(*Name)
<a name="l01620"></a>01620             {
<a name="l01621"></a>01621                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;중복된 컨텐트명입니다&gt;&quot;</span>, !Map.Access(Name));
<a name="l01622"></a>01622                 Map[Name] = NewData;
<a name="l01623"></a>01623             }
<a name="l01624"></a>01624         }
<a name="l01625"></a>01625         <span class="keywordtype">void</span> AddOutline(<a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map, <span class="keywordtype">string</span> Name, <span class="keywordtype">string</span> Size, <span class="keywordtype">string</span> Fill)
<a name="l01626"></a>01626         {
<a name="l01627"></a>01627             Outline* NewData = BxNew(Outline);
<a name="l01628"></a>01628             NewData-&gt;SetAttb(Name, Size, Fill);
<a name="l01629"></a>01629             CurFocus-&gt;AddChild(NewData);
<a name="l01630"></a>01630             <span class="keywordflow">if</span>(*Name)
<a name="l01631"></a>01631             {
<a name="l01632"></a>01632                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;중복된 컨텐트명입니다&gt;&quot;</span>, !Map.Access(Name));
<a name="l01633"></a>01633                 Map[Name] = NewData;
<a name="l01634"></a>01634             }
<a name="l01635"></a>01635         }
<a name="l01636"></a>01636         <span class="keywordtype">void</span> AddExtra(<a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map, <span class="keywordtype">string</span> Name, <span class="keywordtype">string</span> Width, <span class="keywordtype">string</span> Height, <span class="keywordtype">string</span> Fill)
<a name="l01637"></a>01637         {
<a name="l01638"></a>01638             Extra* NewData = BxNew(Extra);
<a name="l01639"></a>01639             NewData-&gt;SetAttb(Name, Width, Height, Fill);
<a name="l01640"></a>01640             CurFocus-&gt;AddChild(NewData);
<a name="l01641"></a>01641             <span class="keywordflow">if</span>(*Name)
<a name="l01642"></a>01642             {
<a name="l01643"></a>01643                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;중복된 컨텐트명입니다&gt;&quot;</span>, !Map.Access(Name));
<a name="l01644"></a>01644                 Map[Name] = NewData;
<a name="l01645"></a>01645             }
<a name="l01646"></a>01646         }
<a name="l01647"></a>01647         <span class="keywordtype">void</span> AddView(<a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map, <span class="keywordtype">string</span> Name, <span class="keywordtype">string</span> PosX, <span class="keywordtype">string</span> PosY, <span class="keywordtype">string</span> Width, <span class="keywordtype">string</span> Height, <span class="keywordtype">string</span> Scroll, <span class="keywordtype">string</span> Fill)
<a name="l01648"></a>01648         {
<a name="l01649"></a>01649             View* NewData = BxNew(View);
<a name="l01650"></a>01650             NewData-&gt;SetAttb(Name, PosX, PosY, Width, Height, Scroll, Fill);
<a name="l01651"></a>01651             CurFocus-&gt;AddChild(NewData);
<a name="l01652"></a>01652             <span class="keywordflow">if</span>(*Name)
<a name="l01653"></a>01653             {
<a name="l01654"></a>01654                 BxAssert(<span class="stringliteral">&quot;BxSceneObject&lt;중복된 컨텐트명입니다&gt;&quot;</span>, !Map.Access(Name));
<a name="l01655"></a>01655                 Map[Name] = NewData;
<a name="l01656"></a>01656             }
<a name="l01657"></a>01657         }
<a name="l01658"></a>01658         <span class="keywordtype">void</span> Rendering(<span class="keyword">const</span> <a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a>&amp; Map, <a class="code" href="class_bx_draw.html" title="OpenGL/SW랜더링기반 그리기도구">BxDraw</a>&amp; Draw, <a class="code" href="structrect.html" title="rect구조체 : l, t, r, b">rect</a> Rect)
<a name="l01659"></a>01659         {
<a name="l01660"></a>01660             Top.RenderingTree(Map, Draw, Rect);
<a name="l01661"></a>01661         }
<a name="l01662"></a>01662         <span class="keywordtype">bool</span> OnEvent(<span class="keyword">const</span> <a class="code" href="structsysevent.html" title="OnEvent()의 이벤트파라미터">sysevent</a>&amp; Event)
<a name="l01663"></a>01663         {
<a name="l01664"></a>01664             <span class="keywordflow">return</span> Top.OnEventTree(Event);
<a name="l01665"></a>01665         }
<a name="l01666"></a>01666     };
<a name="l01668"></a>01668 
<a name="l01669"></a><a class="code" href="class_bx_scene_object.html#a94c0076a3381b646504fe5833585d597">01669</a>     Section <a class="code" href="class_bx_scene_object.html#a94c0076a3381b646504fe5833585d597">CurSection</a>;
<a name="l01670"></a>01670     <a class="code" href="class_bx_var.html">BxVar&lt;Layout&gt;</a> Layout;
<a name="l01671"></a>01671     <a class="code" href="class_bx_var.html">BxVar&lt;Content&gt;</a> Content;
<a name="l01672"></a>01672     <a class="code" href="class_bx_var_map.html">BxVarMap&lt;Element*&gt;</a> Map;
<a name="l01673"></a>01673 };
</pre></div></div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Tue May 22 2012 01:29:38 for BxEngine by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
